(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fccd29e2"],{8045:function(e,t,r){"use strict";r("fa44")},a23c:function(e,t,r){var o,a;
/*!
  * $script.js JS loader & dependency manager
  * https://github.com/ded/script.js
  * (c) Dustin Diaz 2014 | License MIT
  */(function(n,i){e.exports?e.exports=i():(o=i,a="function"===typeof o?o.call(t,r,t,e):o,void 0===a||(e.exports=a))})(0,(function(){var e,t,r=document,o=r.getElementsByTagName("head")[0],a=!1,n="push",i="readyState",s="onreadystatechange",c={},u={},p={},d={};function l(e,t){for(var r=0,o=e.length;r<o;++r)if(!t(e[r]))return a;return 1}function f(e,t){l(e,(function(e){return t(e),1}))}function m(t,r,o){t=t[n]?t:[t];var a=r&&r.call,i=a?r:o,s=a?t.join(""):r,g=t.length;function v(e){return e.call?e():c[e]}function h(){if(!--g)for(var e in c[s]=1,i&&i(),p)l(e.split("|"),v)&&!f(p[e],v)&&(p[e]=[])}return setTimeout((function(){f(t,(function t(r,o){return null===r?h():(o||/^https?:\/\//.test(r)||!e||(r=-1===r.indexOf(".js")?e+r+".js":e+r),d[r]?(s&&(u[s]=1),2==d[r]?h():setTimeout((function(){t(r,!0)}),0)):(d[r]=1,s&&(u[s]=1),void y(r,h)))}))}),0),m}function y(e,a){var n,c=r.createElement("script");c.onload=c.onerror=c[s]=function(){c[i]&&!/^c|loade/.test(c[i])||n||(c.onload=c[s]=null,n=1,d[e]=2,a())},c.async=1,c.src=t?e+(-1===e.indexOf("?")?"?":"&")+t:e,o.insertBefore(c,o.lastChild)}return m.get=y,m.order=function(e,t,r){(function o(a){a=e.shift(),e.length?m(a,o):m(a,t,r)})()},m.path=function(t){e=t},m.urlArgs=function(e){t=e},m.ready=function(e,t,r){e=e[n]?e:[e];var o=[];return!f(e,(function(e){c[e]||o[n](e)}))&&l(e,(function(e){return c[e]}))?t():function(e){p[e]=p[e]||[],p[e][n](t),r&&r(o)}(e.join("|")),m},m.done=function(e){m([null],e)},m}))},cb64:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e._self._c;return t("no-ssr",[t("lazy-component",{staticClass:"map-activities",on:{show:e.loadScripts}},[t("div",{ref:"container",staticClass:"map-activities__container u-absolute-full mapboxgl-map",class:{_preloader:e.preloader},attrs:{id:e.id}})])],1)},a=[],n=(r("159b"),r("a4d3"),r("e01a"),r("fb6a"),r("a23c")),i=r.n(n),s=r("e192"),c=r.n(s),u=r("8a8d"),p=r("f92d"),d=r.n(p),l={components:{"no-ssr":d.a},props:{coordinates:{type:[String,Object],required:!0}},data:function(){return{markers:[],preloader:!0}},computed:{id:function(){return Object(u["a"])("map-activities-")}},methods:{loadScripts:function(){var e=this;i()(["/static/vendor/turf.min.js"],"mapbox-bundle"),i.a.ready("mapbox-bundle",(function(){return e.createMapBox(e.removePreloader)}))},createMapBox:function(e){var t=this.id,r=this.coordinates,o=this.markers,a=this.getBounds;c.a.accessToken=fakeWindow.mapBoxKey;var n=new c.a.Map({container:t,style:"mapbox://styles/mapbox/streets-v11?optimize=true",center:r.center,zoom:r.zoom}),i={type:"FeatureCollection",features:[]},s={type:"FeatureCollection",features:[]},u={type:"FeatureCollection",properties:[],features:[]};if(r.route){var p=r.route;p.push(r.route[0]),i.features.push({type:"Feature",geometry:{type:"LineString",coordinates:p}}),s.features.push({type:"Feature",geometry:{type:"LineString",coordinates:p}}),u.features.push({type:"Feature",properties:{},geometry:{type:"Point",coordinates:r.route[0]}}),r.route.forEach((function(e,t){if(void 0===r.day_number[t])return!0;i.features.push({type:"Feature",properties:{description:r.day_description[t],day:r.day_number[t]},geometry:{type:"Point",coordinates:e}})}))}var d=[];i.features.forEach((function(e,t){if("Point"===e.geometry.type){if(void 0===e.properties.day)return!0;o.push(e.geometry.coordinates);var r=document.createElement("div");d[e.geometry.coordinates]&&void 0!==d[e.geometry.coordinates]?(r.append(d[e.geometry.coordinates]._element.innerHTML),r.append(","),r.append(e.properties.day),r.className="map-activities__marker--big",d[e.geometry.coordinates].remove()):r.append(e.properties.day),r.className=r.classList+" map-activities__marker",0===t&&(r.className=r.classList+"map-activities__marker  map-activities__marker--first"),d[e.geometry.coordinates]=new c.a.Marker(r).setLngLat(e.geometry.coordinates).addTo(n)}}));for(var l=fakeWindow.turf.length(s.features[0]),f=[],m=500,y=0;y<l;y+=l/m){var g=fakeWindow.turf.along(s.features[0],y);f.push(g.geometry.coordinates)}s.features[0].geometry.coordinates=f;var v=0;n.on("load",(function(){var e;function t(){var r=s.features[0].geometry.coordinates[v>=m?v-1:v],o=s.features[0].geometry.coordinates[v>=m?v:v+1];r&&o&&(u.features[0].geometry.coordinates=s.features[0].geometry.coordinates[v],u.features[0].properties.bearing=fakeWindow.turf.bearing(fakeWindow.turf.point(r),fakeWindow.turf.point(o)),n.getSource("tourist").setData(u),v<m-10?e=requestAnimationFrame(t):(cancelAnimationFrame(e),v=0,t(v)),v+=1)}if(n.addSource("route",{type:"geojson",data:i}),n.addSource("places",{type:"geojson",data:i}),n.addSource("tourist",{type:"geojson",data:u}),n.addLayer({id:"places",type:"circle",source:"places",paint:{"circle-color":"#EF7F1A","circle-radius":6,"circle-stroke-width":0}}),n.addLayer({id:"route",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#EF7F1A","line-width":2},filter:["in","$type","LineString"]}),n.loadImage("/local/templates/youtravel/static/i/tour-page/arrow.png",(function(e,t){n.addImage("arrow",t)})),n.addLayer({id:"tourist",source:"tourist",type:"symbol",layout:{"icon-image":"arrow","icon-size":1,"icon-rotate":["get","bearing"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}}),t(v),o.length>1){var r=a(o);n.fitBounds(r)}var p=new c.a.Popup({closeButton:!1,closeOnClick:!1});n.on("mousemove","places",(function(e){if(void 0!==e.features[0].properties.description){n.getCanvas().style.cursor="pointer";var t=e.features[0].geometry.coordinates.slice(),r=e.features[0].properties.description;while(Math.abs(e.lngLat.lng-t[0])>180)t[0]+=e.lngLat.lng>t[0]?360:-360;p.setLngLat(e.lngLat).setHTML(r).addTo(n)}})),n.on("mouseleave","places",(function(){n.getCanvas().style.cursor="",p.remove()}))})),e()},removePreloader:function(){this.preloader=!1},getBounds:function(e){var t=[],r=[],o=.2;return e.forEach((function(e){t.push(e[0]),r.push(e[1])})),[[Math.min.apply(Math,t)-o,Math.min.apply(Math,r)-o],[Math.max.apply(Math,t)+o,Math.max.apply(Math,r)+o]]}}},f=l,m=(r("8045"),r("0c7c")),y=Object(m["a"])(f,o,a,!1,null,"9e53e02c",null);t["default"]=y.exports},fa44:function(e,t,r){}}]);
//# sourceMappingURL=chunk-fccd29e2.d8ec4434.js.map