(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);p&&p(t);while(d.length)d.shift()();return a.push.apply(a,c||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],i=!0,r=1;r<s.length;r++){var o=s[r];0!==n[o]&&(i=!1)}i&&(a.splice(t--,1),e=l(l.s=s[0]))}return e}var i={},r={serp:0},n={serp:0},a=[];function o(e){return l.p+"js/"+({"chunk-vue-tel-input":"chunk-vue-tel-input"}[e]||e)+"."+{"chunk-ff8ef73e":"2aec7ec6","chunk-vue-tel-input":"908d1187"}[e]+".js"}function l(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.e=function(e){var t=[],s={"chunk-ff8ef73e":1,"chunk-vue-tel-input":1};r[e]?t.push(r[e]):0!==r[e]&&s[e]&&t.push(r[e]=new Promise((function(t,s){for(var i="css/"+({"chunk-vue-tel-input":"chunk-vue-tel-input"}[e]||e)+"."+{"chunk-ff8ef73e":"a3041658","chunk-vue-tel-input":"0ed9a311"}[e]+".css",n=l.p+i,a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var c=a[o],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===i||u===n))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],u=c.getAttribute("data-href");if(u===i||u===n)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||n,a=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=i,delete r[e],p.parentNode.removeChild(p),s(a)},p.href=n;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){r[e]=0})));var i=n[e];if(0!==i)if(i)t.push(i[2]);else{var a=new Promise((function(t,s){i=n[e]=[t,s]}));t.push(i[2]=a);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,l.nc&&u.setAttribute("nonce",l.nc),u.src=o(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var s=n[e];if(0!==s){if(s){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",d.name="ChunkLoadError",d.type=i,d.request=r,s[1](d)}n[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},l.m=e,l.c=i,l.d=function(e,t,s){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)l.d(s,i,function(t){return e[t]}.bind(null,i));return s},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/local/templates/youtravel/vue-app/dist/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;a.push([4,"chunk-vendors","chunk-serp-vendors","chunk-common"]),s()})({"0158":function(e,t,s){e.exports={white:"#fff",black:"#121212","pitch-black":"#000",secondary:"#9999a9",red:"#f84565","green-main":"#abc232","green-hover":"#9aae2d","green-dark":"#87a038","gray-dark":"#d1d7e8","gray-hover":"#e4e4e8","gray-light":"#eeeef2"}},"0453":function(e,t,s){"use strict";s("ed3f")},"318c":function(e,t,s){},"38c9":function(e,t,s){},"3f6e":function(e,t,s){"use strict";s("318c")},4:function(e,t,s){e.exports=s("4f79")},4866:function(e,t,s){},"4f79":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),r=s("2b88"),n=s.n(r),a=s("f40c"),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"serp"},[t("TopMenu",{ref:"topMenu",on:{showFilter:function(t){return e.$refs.tours.showFilter()}}}),t("Tours",{ref:"tours"})],1)},l=[],c=s("5530"),u=(s("ac1f"),s("841c"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"top-menu"},[t("div",{staticClass:"tour-date-selector-container",class:{loaded:e.isMobile&&e.screenWidth}},[e.isMobile&&e.screenWidth?t("div",[t("TourDateSelector",{on:{showSelectorPopup:e.showSelectorPopup,clearSearch:e.clearTourDateSearch}})],1):e._e()]),!e.isMobile&&e.screenWidth?t("div",{staticClass:"top-menu__search-container"},[e.isShowTabs?t("div",{staticClass:"top-menu__tabs"},[t("div",{staticClass:"top-menu__tabs-container"},[t("YtTab",{attrs:{tabs:e.tabs,selectedIndex:e.getActiveTab},on:{select:e.setActiveTab}})],1)]):e._e(),e.nonSSR?t("div",{staticClass:"top-menu__search"},[t("TourSearch",{ref:"search",staticClass:"search",on:{updateLocation:function(t){e.selectLocation(t&&[t]),e.$refs.searchFixed.setLocation(t)},searchChange:function(t){return e.$refs.searchFixed.setLocationSearch(t)},updateDate:function(t){e.selectDates(t&&[t]),e.$refs.searchFixed.setDate(t)},switchPeriod:function(t){return e.setStrictPeriod(t)}}})],1):t("div",{staticClass:"top-menu__fake"},[t("div",{staticClass:"top-menu__fake-search"})])]):e._e(),e.isMobile&&e.screenWidth?t("popup-slide",{attrs:{title:e.$t("serp.topMenu.searchMob"),show:e.isSelectorPopupShow,"block-page-scroll":!e.mobileDatePopupIsOpen},on:{close:e.closeSelectorPopup}},[e._t("default",(function(){return[e.isShowTabs?t("div",{staticClass:"top-menu__tabs-mob"},[t("YtTab",{attrs:{tabs:e.tabs,selectedIndex:e.getActiveTab},on:{select:e.setActiveTab}})],1):e._e(),e.nonSSR&&e.isSelectorPopupShow?t("div",{staticClass:"top-menu__search-mob"},[t("div",{staticClass:"top-menu__fake-mob"},[t("div",{staticClass:"top-menu__fake-mob-loc"}),t("div",{staticClass:"top-menu__fake-mob-date"})]),t("TourSearch",{ref:"searchMobile",staticClass:"search",attrs:{showDivider:!1},on:{updateLocation:function(t){e.selectedLocation=t&&[t]},updateDate:function(t){e.selectedDates=t&&[t]},switchPeriod:function(t){return e.setStrictPeriod(t)}}})],1):t("div",{staticClass:"top-menu__fake-mob"},[t("div",{staticClass:"top-menu__fake-mob-loc"}),t("div",{staticClass:"top-menu__fake-mob-date"})]),t("yt-button",{staticClass:"top-menu__search-mb-btn",attrs:{squared:"true"},on:{click:e.setDateLocationFilters}},[e._v(" "+e._s(e.$t("serp.topMenu.search"))+" ")])]}))],2):e._e(),t("div",{staticClass:"top-menu__filters u-fixed-center-x"},[t("yt-button",{on:{click:function(t){return e.$emit("showFilter")}}},[t("span",{staticClass:"u-flex u-flex-items-center"},[t("span",{staticClass:"top-menu__filters-icon u-flex-shrink-0"},[t("svg-inline",{attrs:{tag:"span"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("icon",{key:e.showReset,attrs:{icon:"setting".concat(e.showReset?"-active":"")}})],1)],1)],1),t("span",{domProps:{innerHTML:e._s(e.$t("serp.filters.trigger"))}})])])],1),t("div",{staticClass:"top-menu__suggest",class:{"top-menu__suggest--hidden":!e.isShowPresets},attrs:{id:"suggest"}},[e.isRussian?t("div",{staticClass:"top-menu__suggest__item",on:{click:e.openBanner}},[t("Icon",{staticClass:"img",attrs:{icon:"app-top-menu"}}),t("div",{staticClass:"font-text"},[e._v("Скачать приложение")])],1):e._e(),e._l(e.presets,(function(s){return[t("div",{key:s.ID,staticClass:"top-menu__suggest__item",on:{click:function(t){return e.clickPreset(s)}}},[t("img",{staticClass:"img",attrs:{src:s.PICTURE,alt:s.NAME,loading:"lazy"}}),t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.NAME)}})])]}))],2),t("transition",{attrs:{name:"slide"}},[e.nonSSR?t("div",{directives:[{name:"show",rawName:"v-show",value:e.isStickySearch,expression:"isStickySearch"}],staticClass:"top-menu__search-fixed"},[!e.isMobile&&e.screenWidth?t("TourSearch",{ref:"searchFixed",staticClass:"search",on:{updateLocation:function(t){e.selectLocation(t&&[t]),e.$refs.search.setLocation(t)},searchChange:function(t){return e.$refs.search.setLocationSearch(t)},updateDate:function(t){e.selectDates(t&&[t]),e.$refs.search.setDate(t)},switchPeriod:function(t){return e.setStrictPeriod(t)}}}):e._e(),e.isMobile&&e.screenWidth?t("TourDateSelector",{on:{showSelectorPopup:e.showSelectorPopup,clearSearch:e.clearTourDateSearch}}):e._e()],1):e._e()]),t("BannerAppModal",{ref:"bannerAppModal",attrs:{"qr-code-url":e.bannerQrCodeUrl}})],1)}),d=[],p=s("1da1"),h=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),s("c740"),s("07ac"),function(){var e=this,t=e._self._c;e._self._setupProxy;return t("Modal",{directives:[{name:"show",rawName:"v-show",value:e.isModal,expression:"isModal"}],staticClass:"banner-app__wrapper",on:{close:e.close}},[t("div",{staticClass:"banner-app__header"},[t("div",{staticClass:"banner-app__header__icon-close",on:{click:function(t){return e.close()}}},[t("Icon",{attrs:{icon:"close",color:"#9999A9"}})],1)]),t("div",{staticClass:"banner-app__body banner-app__desktop"},[e.qrCodeUrl?t("img",{staticClass:"banner-app__image",attrs:{src:e.qrCodeUrl,alt:""}}):t("Icon",{staticClass:"banner-app__image",attrs:{icon:"app-qr-code"}}),t("div",{staticClass:"banner-app__title font-h2"},[e._v("Приложение YouTravel.me")]),t("div",{staticClass:"banner-app__text"},[e._v(" Наведите камеру на QR-код, чтобы установить приложение ")])],1),t("div",{staticClass:"banner-app__body banner-app__mobile"},[t("Icon",{staticClass:"banner-app__image",attrs:{icon:"app-top-menu"}}),t("div",{staticClass:"banner-app__title font-h2"},[e._v("С приложением удобнее")]),t("div",{staticClass:"banner-app__text"},[e._v(" Проще управлять бронированиямии копить бонусы ")]),t("Button",{staticClass:"banner-app__btn",attrs:{tag:"a",color:"violet",text:"Открыть приложение",onclick:"fakeWindow.open('/download-app')"},on:{click:e.openAppBtnHandler}}),t("Button",{staticClass:"banner-app__btn-cancel",attrs:{tag:"a",color:"white",text:"Спасибо, не нужно"},on:{click:e.close}})],1)])}),f=[],v=s("9ea0"),_=s("c16e"),m=s("c763"),g=s("160c"),b=Object(i["defineComponent"])({props:{qrCodeUrl:{type:String,default:""}},components:{Icon:_["a"],Modal:m["a"],Button:g["a"]},setup:function(){var e=Object(i["ref"])(!1);function t(){e.value=!0}function s(){v["a"].track("Download App popup","Click Close banner"),e.value=!1}function r(){v["a"].track("Download App popup","Click Open App")}return{open:t,close:s,isModal:e,openAppBtnHandler:r}}}),y=b,k=(s("9649"),s("0c7c")),w=Object(k["a"])(y,h,f,!1,null,null,null),C=w.exports,x=s("4992"),S=s("6eca"),O=s("2f62"),T=s("402c");s("1276");function j(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;document.cookie=e+"="+t+";Max-Age="+s+";path=/"}function F(e){var t="; ".concat(document.cookie),s=t.split("; ".concat(e,"="));if(2===s.length)return s.pop().split(";").shift()}function P(){return{setCookie:j,getCookie:F}}var D=s("bc3a"),M=s.n(D),$=s("3778"),I=M.a.create({baseURL:"".concat(vueOptions.VUE_APP_BASE_URL_BACKEND||""),timeout:1e4,paramsSerializer:function(e){var t=Object($["a"])(),s=t.stringifyQuery;return s(e)}}),B=P(),L=B.getCookie,E=Object(i["reactive"])({wasOpen:"true"===L("bannerAppModal")});function R(){return Q.apply(this,arguments)}function Q(){return Q=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I.get("/download-app/?get_qr_link=Y");case 2:return t=e.sent,s=t.data,e.abrupt("return",s.data.qrImage);case 5:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function A(){return{wasOpen:Object(i["toRef"])(E,"wasOpen"),getQrCodeUrl:R}}var V=s("1a52"),N=function(){var e=this,t=e._self._c;return t("mounting-portal",{attrs:{"mount-to":"#vue-popups",append:"",slim:""}},[t("transition",{attrs:{name:"fade"}},[e.show?t("div",{directives:[{name:"scroll-lock",rawName:"v-scroll-lock",value:e.show&&e.blockPageScroll,expression:"show && blockPageScroll"}],staticClass:"yt-popup-slide__container u-fixed-full",on:{click:function(t){return t.target!==t.currentTarget?null:e.close.apply(null,arguments)}}}):e._e()]),t("div",{staticClass:"yt-popup-slide",class:{visible:e.show}},[t("div",{staticClass:"yt-popup-slide__header"},[t("div",{staticClass:"yt-popup-slide__title",domProps:{innerHTML:e._s(e.title)}}),e.showCloseButton?t("div",{staticClass:"yt-popup-slide__close",on:{click:function(t){return t.target!==t.currentTarget?null:e.close.apply(null,arguments)}}},[t("Icon",{attrs:{icon:"close",color:"#9999A9"}})],1):e._e()]),t("div",{staticClass:"yt-popup-slide__body"},[e._t("default")],2)])],1)},q=[],W={name:"yt-popup-slide",components:{Icon:_["a"]},props:{title:{type:String,default:""},show:{type:Boolean,default:!1},showCloseButton:{type:Boolean,default:!0},blockPageScroll:{type:Boolean,default:!0}},methods:{close:function(){this.$emit("close",!0)}}},H=W,U=(s("61d6"),Object(k["a"])(H,N,q,!1,null,"29840fde",null)),z=U.exports,Y=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tour-date-selector"},[t("div",{staticClass:"tour-date-selector__left",on:{click:function(t){return e.$emit("showSelectorPopup")}}},[t("Icon",{staticClass:"tour-date-selector__icon-search",attrs:{icon:"search",color:"#121212"}}),t("div",{staticClass:"tour-date-selector__body"},[t("div",{staticClass:"tour-date-selector__location"},[e._v(e._s(e.getTypeText)+", "+e._s(e.getDirectionText))]),t("div",{staticClass:"tour-date-selector__date"},[e._v(" "+e._s(e.getDatesText)+" ")])])],1),t("div",{staticClass:"tour-date-selector__icon-close",on:{click:function(t){return e.$emit("clearSearch")}}},[e.showCloseBtn?t("Icon",{attrs:{icon:"close",color:"#9999A9"}}):e._e()],1)])},J=[],X=s("3835"),K=s("b27b"),G=s("2cf3"),Z={name:"tour-date-selector",components:{Icon:_["a"]},data:function(){return{isPopupOpen:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(O["e"])({productType:function(e){return e.serp.productType},dates:function(e){return e.serp.dates},location:function(e){return e.serp.location}})),{},{getTypeText:function(){var e="";switch(this.productType){case"multiDays":e=this.$t("serp.topMenu.manyDays");break;case"oneDay":e=this.$t("serp.topMenu.oneDay");break;case"exclusive":e=this.$t("serp.topMenu.unusual");break}return e},getDirectionText:function(){return this.location?this.location[0].label:this.$t("serp.topMenu.allDirections")},getDatesText:function(){var e=this.dates?this.dates[0]:this.dates;if(this.dates){var t=Object(X["a"])(e,2),s=t[0],i=t[1],r=this.isValidDate(s)?s:Object(G["a"])(s,"dd.MM.yyyy",new Date),n=this.isValidDate(i)?i:Object(G["a"])(i,"dd.MM.yyyy",new Date);return Object(K["a"])(r,n,V["a"].locale)+" "+n.getFullYear()}return this.$t("serp.topMenu.allDates")},showCloseBtn:function(){return this.location||this.dates}}),methods:Object(c["a"])(Object(c["a"])({},Object(O["d"])({selectDates:"serp/selectDates",selectLocation:"serp/selectLocation"})),{},{isValidDate:function(e){return e instanceof Date&&!isNaN(e)},openSelectorPopup:function(){this.isPopupOpen=!0},closePopup:function(){this.isPopupOpen=!1}})},ee=Z,te=(s("9f78"),Object(k["a"])(ee,Y,J,!1,null,"0b4f0eb0",null)),se=te.exports,ie=function(){var e=this,t=e._self._c;return t("div",{staticClass:"yt-tab"},[e._l(e.tabs,(function(s,i){return t("div",{key:i,staticClass:"yt-tab__item",class:{active:+e.selectedIndex===i,divider:e.tabs.length>2&&i},on:{click:function(t){return e.$emit("select",i)}}},[s.icon?t("svg-inline",{staticClass:"yt-tab__item__icon"},[t("Icon",{attrs:{icon:s.icon,color:s.iconColor||"#121212"}})],1):e._e(),t("span",{domProps:{textContent:e._s(s.label)}})],1)})),t("div",{staticClass:"yt-tab__selected",style:e.selectedStyle})],2)},re=[],ne=(s("a9e3"),{name:"yt-tab",components:{SvgInline:S["a"],Icon:_["a"]},props:{tabs:{type:Array,default:function(){return[]}},selectedIndex:{type:[String,Number],default:0}},computed:{selectedStyle:function(){return{transform:"translateX(".concat(100*+this.selectedIndex,"%)"),width:"calc((100% - 8px) / ".concat(this.tabs.length,")")}}}}),ae=ne,oe=(s("c020"),Object(k["a"])(ae,ie,re,!1,null,"4a7edfcb",null)),le=oe.exports,ce={name:"top-menu",components:{BannerAppModal:C,TourDateSelector:se,TourSearch:function(){return s.e("chunk-ff8ef73e").then(s.bind(null,"2a34"))},YtButton:x["a"],SvgInline:S["a"],Icon:_["a"],YtTab:le,PopupSlide:z},data:function(){return{isRussian:"ru"===V["a"].locale,isStickySearch:!1,slideShow:!1,presets:{},seoText:"Найдите подходящий для вас тур по Армении. У нас 39 приключений в Армению, начиная всего с трех дней, и самый длинный тур – 14 дней. Наиболее популярным месяцем является май, который имеет наибольшее количество туров.",tabs:[{label:this.$t("serp.topMenu.manyDays")},{label:this.$t("serp.topMenu.oneDay")},{label:this.$t("serp.topMenu.unusual")}],tabsIds:["multiDays","oneDay","exclusive"],selectedDates:"",selectedLocation:"",screenWidth:0,nonSSR:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(O["e"])({query:function(e){return e.serp.serpQuery.query},ssrPresets:function(e){var t,s;return null===(t=e.serp.serpTours)||void 0===t||null===(s=t.presets)||void 0===s?void 0:s.data},showReset:function(e){return e.serp.showReset},dates:function(e){return e.serp.dates},location:function(e){return e.serp.location},only_exclusive:function(e){return e.serp.only_exclusive},productType:function(e){return e.serp.productType},mobileDatePopupIsOpen:function(e){return e.serp.mobileDatePopupIsOpen}})),{},{getActiveTab:function(){var e=this;return this.tabsIds.findIndex((function(t){return t===e.productType}))},isMultiDaysProduct:function(){return"multiDays"===this.productType},isOneDayProduct:function(){return"oneDay"===this.productType},isExclusiveProduct:function(){return"exclusive"===this.productType},isShowPresets:function(){return this.presets&&Object.values(this.presets).length},isShowTabs:function(){return this.isRussian},isMobile:function(){return this.screenWidth<943},isSelectorPopupShow:function(){return this.slideShow}}),watch:{dates:function(e){this.isMobile||(this.$refs.search.setDate(e),this.$refs.searchFixed.setDate(e))},location:function(e){this.isMobile||(this.$refs.search.setLocation(e),this.$refs.searchFixed.setLocation(e))}},setup:function(){var e=A(),t=e.getQrCodeUrl,s=Object(i["ref"])(void 0),r=Object(i["ref"])(void 0);function n(){return a.apply(this,arguments)}function a(){return a=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return v["a"].track("Tour list","Click Download banner"),e.next=3,t();case 3:r.value=e.sent,s.value.open();case 5:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return{openBanner:n,bannerQrCodeUrl:r,bannerAppModal:s}},created:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateWidth(),e.ssrPresets&&Object.values(e.ssrPresets).length&&(e.presets=e.ssrPresets),vueOptions.ssr){t.next=8;break}return t.next=5,T["a"].getPresets().catch((function(e){return console.log(e)}));case 5:i=t.sent,null!==i&&void 0!==i&&null!==(s=i.data)&&void 0!==s&&s.success&&(e.presets=i.data.data),e.nonSSR=!0;case 8:case"end":return t.stop()}}),t)})))()},mounted:function(){fakeWindow.addEventListener("scroll",this.initSuggest),fakeWindow.addEventListener("resize",this.setSearchBtnText),fakeWindow.addEventListener("resize",this.updateWidth),this.setSearchBtnText()},beforeDestroy:function(){fakeWindow.removeEventListener("scroll",this.initSuggest),fakeWindow.removeEventListener("resize",this.setSearchBtnText),fakeWindow.removeEventListener("resize",this.updateWidth)},methods:Object(c["a"])(Object(c["a"])({},Object(O["d"])({selectDates:"serp/selectDates",selectLocation:"serp/selectLocation",setStrictPeriod:"serp/setStrictPeriod",setIsOnlyExclusive:"serp/setIsOnlyExclusive",setProductType:"serp/setProductType"})),{},{updateWidth:function(){this.screenWidth=fakeWindow.innerWidth},setDateLocationFilters:function(){this.selectDates(""==this.selectedDates?this.dates:this.selectedDates),this.selectLocation(""==this.selectedLocation?this.location:this.selectedLocation),this.scrollTop(),this.slideShow=!1},setActiveTab:function(e){var t=this.tabsIds[e];this.setProductType(t),this.setIsOnlyExclusive("exclusive"===t)},showSelectorPopup:function(){this.slideShow=!0},closeSelectorPopup:function(){this.slideShow=!1},clickPreset:function(e){var t=e.PROPERTY_BANNER_LINK_VALUE;fakeWindow.open(t,"_blank").focus()},setSearchBtnText:function(){fakeWindow.innerWidth>=768&&fakeWindow.innerWidth<=1279?this.searchBtnText=this.$t("serp.topMenu.search"):this.searchBtnText=this.$t("serp.topMenu.searchLong")},scrollTop:function(){fakeWindow.scrollTo(0,0)},initSuggest:function(){var e=document.getElementById("suggest");"fixed"!==document.body.style.position&&(this.isStickySearch=window.scrollY>e.offsetTop+e.offsetHeight+40)},downloadAppClick:function(){v["a"].track("Tour list","Click Download banner"),this.$refs.bannerAppModal.open()},clearTourDateSearch:function(){this.selectDates(null),this.selectLocation(null),this.selectedLocation="",this.selectedDates="",this.scrollTop()}})},ue=ce,de=(s("0453"),Object(k["a"])(ue,u,d,!1,null,"b616b9fc",null)),pe=de.exports,he=(s("9911"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"serp-tours__container"},[t("div",{staticClass:"serp-tours__content"},[e.showReset?t("div",{staticClass:"serp-tours__reset"},[e._l(e.changedFilters,(function(s){var i=s.code,r=s.label;return t("div",{key:i,staticClass:"serp-tours__reset-item"},[t("yt-pill",{attrs:{removable:""},on:{remove:function(t){return e.resetFilter(i)}}},[e._v(" "+e._s(r)+" ")])],1)})),t("div",{staticClass:"serp-tours__reset-all-desktop"},[t("yt-pill",{attrs:{disabled:!e.showReset,removable:""},on:{remove:function(t){return e.$refs.filters.resetFilters()}}},[t("span",[e._v(" "+e._s(e.$t("serp.tours.".concat(e.showReset?"reset":"no","Filters")))+" ")]),e.changedFilters.length?t("span",[e._v(" ("+e._s(e.changedFilters.length)+") ")]):e._e()])],1),e.showReset?t("div",{staticClass:"serp-tours__reset-all",on:{click:function(t){return e.$refs.filters.resetFilters()}}},[t("span",{staticClass:"font-text",domProps:{textContent:e._s(e.$t("serp.tours.resetFilters"))}}),t("Icon",{attrs:{icon:"close",color:"#1f1f1f"}})],1):e._e()],2):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.total,expression:"total"}],staticClass:"serp-tours__sort"},[t("div",{staticClass:"serp-tours__total font-text"},[t("div",{staticClass:"serp-tours__total-mobile",domProps:{textContent:e._s(e.$t("serp.tours.foundTours.mobile",{total:e.total}))}}),t("div",{staticClass:"serp-tours__total-desktop",domProps:{textContent:e._s(e.$t("serp.tours.foundTours.desktop",{total:e.total}))}})]),t("div",[t("div",{staticClass:"serp-tours__sort__mobile font-text"},[t("div",{staticClass:"serp-tours__sort__mobile__title font-text",domProps:{textContent:e._s(e.$t("serp.tours.sort"))}}),t("div",{staticClass:"serp-tours__sort__mobile__sort-wrapper"},[t("div",{staticClass:"serp-tours__sort__mobile__sort font-text",class:{active:e.showSortDropdown},domProps:{textContent:e._s(e.selectedSorting.label)},on:{click:function(t){t.stopPropagation(),e.showSortDropdown=!e.showSortDropdown}}}),t("div",{staticClass:"serp-tours__sort__mobile__sort-arrow"})])]),t("div",{ref:"dropdown",staticClass:"serp-tours__sort__dropdown",class:{active:e.showSortDropdown}},e._l(e.sortButtons,(function(s,i){return t("div",{key:i,staticClass:"serp-tours__sort__button font-text",domProps:{textContent:e._s(s.label)},on:{click:function(t){return t.stopPropagation(),e.selectSort(i)}}})})),0)])]),t("Filters",{directives:[{name:"show",rawName:"v-show",value:e.isShowFilter,expression:"isShowFilter"}],ref:"filters",staticClass:"serp-tours__filters",attrs:{sortQuery:e.sortQuery},on:{closeFilter:function(t){e.isShowFilter=!1},loadedFacets:function(t){return e.onLoadedFacets(t)},"changed-filters":function(t){e.changedFilters=t},setQuickFilters:function(t){return e.$emit("setQuickFilters",t)},setParticipants:function(t){e.participants=t}}},[t("div",{attrs:{slot:"banner"},slot:"banner"},e._l(e.firstBanners,(function(s){return t("BannerSerp",{directives:[{name:"show",rawName:"v-show",value:e.isShowFilter,expression:"isShowFilter"}],key:s.id,attrs:{"image-src":s.imageSrc,link:s.link,position:s.position}})})),1)]),t("div",{ref:"results",staticClass:"serp-tours__result",class:{empty:!e.total}},[e.isCashbackPage&&e.serpSeoText?t("div",{staticClass:"serp-tours-seo-content"},[t("div",{staticClass:"serp-tours-seo-content__header",on:{click:e.moreSeoTextDropdown}},[e._v(" "+e._s(e.$t("serp.seo.actionConditions"))+" ")]),t("div",{staticClass:"serp-tours-seo-content__text",class:{active:e.seoTextOpened},domProps:{innerHTML:e._s(e.serpSeoText)}})]):e._e(),e._l(e.filteredBanners,(function(e){return t("BannerSerp",{key:e.id,attrs:{"image-src":e.imageSrc,link:e.link,position:e.position,"is-mobile":e.isImageForMobile}})})),t("div",{staticClass:"serp-banner__double"},e._l(e.doubleBanners,(function(e){return t("BannerSerp",{key:e.id,attrs:{"image-src":e.imageSrc,link:e.link,position:e.position}})})),1),e.total?e._l(e.filteredTours,(function(s,i){return t("TourCard",{key:s.id,staticClass:"serp-tours__result__item",attrs:{tour:s,"lazy-image":s.imageLazy,query:e.queryToString(e.toursQuery),loading:e.loadingTours&&!e.skip||e.loadingTours&&i+1>e.skip,participants:e.participants}})})):e._e(),e.total?e._e():t("div",{staticClass:"serp-tours__result__empty"},[t("div",{staticClass:"serp-tours__result__empty__header font-h0",domProps:{textContent:e._s(e.$t("serp.tours.nothingFound"))}}),t("div",{staticClass:"serp-tours__result__empty__subheader font-h2",domProps:{textContent:e._s(e.$t("serp.tours.tryToChangeFilters"))}}),t("div",{staticClass:"serp-tours__result__empty__buttons"},[t("Button",{staticClass:"serp-tours__result__empty__btn",attrs:{color:"white",text:e.$t("serp.tours.resetFilters")},on:{click:function(t){return e.$refs.filters.resetFilters()}}}),e.isExclusiveProduct?t("Button",{staticClass:"serp-tours__result__empty__btn",attrs:{color:"gray",text:"Искать среди многодневных"},on:{click:function(t){return e.menuTabClickHandler("multiDays")}}}):e._e()],1)])],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMore,expression:"isShowMore"}],staticClass:"serp-tours__show-more"},[t("Button",{staticClass:"serp-tours__show-more__btn",attrs:{color:"green",text:e.$t("serp.tours.showMore")},on:{click:function(t){return e.loadMoreTours()}}})],1)],1)])}),fe=[],ve=s("2909"),_e=(s("6062"),s("4de4"),s("99af"),s("fb6a"),s("159b"),s("7db0"),s("caad"),s("2532"),s("d81d"),s("a434"),s("b64b"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"serp-banner",class:["serp-banner__position_"+e.position,e.isMobile?"mobile":""]},[t("img",{attrs:{src:e.getImageUrl(e.imageSrc)},on:{click:e.openImageLink}})])}),me=[],ge=s("08c3"),be={name:"banner-serp",props:{position:{type:Number,required:!0},link:{type:String,required:!0},imageSrc:{type:String,required:!0},isMobile:{type:Boolean,required:!1,default:!1}},methods:{openImageLink:function(){window.open(this.link)},getImageUrl:function(e){return Object(ge["a"])(e)}}},ye=be,ke=(s("b057"),Object(k["a"])(ye,_e,me,!1,null,"524243e0",null)),we=ke.exports,Ce=function(){var e=this,t=e._self._c;return t(e.tag,e._b({tag:"component",staticClass:"yt-pill",class:{_disabled:e.disabled},on:{click:function(t){return e.$emit("click")}}},"component",e.$attrs,!1),[t("span",{staticClass:"yt-pill__text font-text u-decor"},[e._t("default")],2),t("slide-toggle",{attrs:{dimension:"width"}},[e.removable&&!e.disabled?t("span",{staticClass:"yt-pill__icon u-flex-shrink-0 u-clickable",on:{click:function(t){return e.$emit("remove")}}},[t("span",{staticClass:"yt-pill__icon-container"},[t("svg-inline",{staticClass:"u-decor u-stroke-deep-current",attrs:{tag:"span"}},[t("icon",{attrs:{icon:"close-circle-fill"}})],1)],1)]):e._e()])],1)},xe=[],Se=s("119b"),Oe={inheritAttrs:!1,components:{SlideToggle:Se["a"],SvgInline:S["a"],Icon:_["a"]},props:{tag:{type:String,default:"div"},removable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},Te=Oe,je=(s("5b19"),Object(k["a"])(Te,Ce,xe,!1,null,"4cd55fe6",null)),Fe=je.exports,Pe=s("6243"),De=function(){var e=this,t=e._self._c;return t("div",{staticClass:"filters-container"},[t("div",{staticClass:"filters",class:{"filters--modal":e.isModal}},[t("transition",{attrs:{name:"fade"}},[t("Modal",{directives:[{name:"show",rawName:"v-show",value:e.isModal,expression:"isModal"}],staticClass:"filters-modal",on:{close:function(t){e.isModal=!1}}},[t("div",{staticClass:"filters-modal-wrapper"},[t("div",{staticClass:"filters-modal__header"},[t("div",{staticClass:"font-caps",domProps:{textContent:e._s(e.modalFilter.label)}}),t("div",{staticClass:"filters-modal__header__icon",on:{click:function(t){e.isModal=!1}}},[t("Icon",{attrs:{icon:"close",color:"#9999a9"}})],1)]),t("div",{staticClass:"filters-modal__body"},e._l(e.modalFilter.checks,(function(s,i){return t("div",{key:i,staticClass:"filters__item__checks__item",class:{disabled:s.disabled},on:{click:function(t){return t.stopPropagation(),e.setCheckValue(s)}}},[t("Checkbox",{attrs:{checked:s.selected,disabled:s.disabled}}),t("div",{staticClass:"font-text-small",domProps:{textContent:e._s(s.title)}})],1)})),0)])])],1),t("div",{staticClass:"filters__header"},[t("div",{staticClass:"filters__header__back",on:{click:function(t){return e.$emit("closeFilter")}}},[t("Icon",{attrs:{icon:"back",color:"#121212"}})],1),t("div",{staticClass:"filters__header__text font-h2",domProps:{textContent:e._s(e.$t("serp.filters.trigger"))}})]),e._l(e.clientFilters,(function(s,i){return[e.isHiddenFilter(i)?e._e():t("div",{key:i,staticClass:"filters__item",class:{"_popup-highlight":"only_private"===i&&e.popups.individual}},["range"===s.type?t("div",{ref:"ranged"+i,refInFor:!0,staticClass:"filters__item__range"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__reset"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.changedFilters.includes(i),expression:"changedFilters.includes(id)"}],staticClass:"font-text filters__item__reset",domProps:{textContent:e._s(e.$t("serp.filters.reset"))},on:{click:function(t){return t.stopPropagation(),e.resetFilter(i)}}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)])]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible-range":s.visible}},[t("div",{staticClass:"filters__item__range__inputs"},[t("Input",{staticClass:"filters__item__range__inputs__left",attrs:{label:s.labelStart,placeholder:s.min,value:"prices"===i?e.pricesValue[0]:e.durationValue[0]},on:{input:function(t){return e.setInputValue(i,t,0)}}}),t("Input",{staticClass:"filters__item__range__inputs__right",attrs:{label:s.labelEnd,placeholder:s.max,value:"prices"===i?e.pricesValue[1]:e.durationValue[1]},on:{input:function(t){return e.setInputValue(i,t,1)}}})],1),t("Range",{ref:"range"+i,refInFor:!0,attrs:{min:s.min,max:s.max,value:"prices"===i?e.pricesValue:e.durationValue},on:{input:function(t){return e.setRangeValue(i,t)},"drag-end":function(t){return e.triggerRange(i)}}})],1)]):e._e(),"checks"===s.type?t("div",{staticClass:"filters__item__checks"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__reset"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.changedFilters.includes(i),expression:"changedFilters.includes(id)"}],staticClass:"font-text filters__item__reset",domProps:{textContent:e._s(e.$t("serp.filters.reset"))},on:{click:function(t){return t.stopPropagation(),e.resetFilter(i)}}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)])]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible":s.visible}},[e._l(s.checks.slice(0,5),(function(s,i){return t("div",{key:i,staticClass:"filters__item__checks__item",class:{disabled:s.disabled},on:{click:function(t){return t.stopPropagation(),e.setCheckValue(s)}}},[t("Checkbox",{attrs:{checked:s.selected,disabled:s.disabled}}),t("div",{staticClass:"font-text-small",domProps:{textContent:e._s(s.title)}})],1)})),s.checks.length>5?t("Button",{staticClass:"filters__item__checks__button",attrs:{color:"gray",text:"".concat(e.$t("serp.filters.allChecks"+i)," (").concat(s.checks.length,")")},on:{click:function(t){return e.showModal({filterId:i})}}}):e._e()],2)]):e._e(),"switch"===s.type?t("div",{staticClass:"filters__item__switch filters-uniq-serp__item__switch",on:{click:function(e){s.value=!s.value}}},[t("div",{staticClass:"filters__item__switch__label"},[t("div",{staticClass:"font-text switch-filter__uniq-serp-class",domProps:{textContent:e._s(s.label)}}),s.helperText?t("div",{staticClass:"filters__item__helper font-text-small"},[t("div",{staticClass:"filters__item__helper-icon"},[t("Icon",{attrs:{icon:"info",color:"#828296"}})],1),t("div",{staticClass:"filters__item__helper-modal",domProps:{textContent:e._s(s.helperText)}})]):e._e()]),t("Switcher",{attrs:{checked:s.value}})],1):e._e(),"buttons-select"===s.type?t("div",{staticClass:"filters__item__buttons-select"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__reset"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.changedFilters.includes(i),expression:"changedFilters.includes(id)"}],staticClass:"font-text filters__item__reset",domProps:{textContent:e._s(e.$t("serp.filters.reset"))},on:{click:function(t){return t.stopPropagation(),e.resetFilter(i)}}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)])]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible":s.visible}},[t("div",{staticClass:"filters__item__buttons-select__buttons"},e._l(s.buttons,(function(i,r){return t("ButtonSelect",{key:r,attrs:{text:i.label,active:s.value&&s.value.label===i.label},on:{click:function(t){return e.setButtonSelect(s,i)}}})})),1)])]):e._e(),"input"===s.type?t("div",{staticClass:"filters__item__input"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__reset"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.changedFilters.includes(i),expression:"changedFilters.includes(id)"}],staticClass:"font-text filters__item__reset",domProps:{textContent:e._s(e.$t("serp.filters.reset"))},on:{click:function(t){return t.stopPropagation(),e.resetFilter(i)}}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)])]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible":s.visible}},[t("Input",{attrs:{label:s.inputLabel,type:"number",numberBtns:!0,min:1},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})],1)]):e._e(),"radios"===s.type?t("div",{staticClass:"filters__item__radios"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible":s.visible}},e._l(s.radios,(function(i,r){return t("div",{key:r,staticClass:"filters__item__radios__item",on:{click:function(e){s.value=i}}},[t("Radio",{staticClass:"filters__item__radios__radio",attrs:{checked:s.value&&s.value.label===i.label}}),+i.min?t("div",{staticClass:"filters__item__radios__rating font-caps",domProps:{textContent:e._s(i.min)}}):e._e(),t("div",{staticClass:"font-text-small",domProps:{textContent:e._s(i.label)}})],1)})),0)]):e._e(),"select"===s.type?t("div",{staticClass:"filters__item__select"},[t("div",{staticClass:"filters__item__dropdown",class:{wrapped:!s.visible},on:{click:function(e){s.visible=!s.visible}}},[t("div",{staticClass:"font-text",domProps:{textContent:e._s(s.label)}}),t("div",{staticClass:"filters__item__dropdown__reset"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.changedFilters.includes(i),expression:"changedFilters.includes(id)"}],staticClass:"font-text filters__item__reset",domProps:{textContent:e._s(e.$t("serp.filters.reset"))},on:{click:function(t){return t.stopPropagation(),e.resetFilter(i)}}}),t("div",{staticClass:"filters__item__dropdown__icon",class:{"filters__item__dropdown__icon--active":s.visible}},[t("Icon",{attrs:{icon:"dropdown",color:"#C1CEDE"}})],1)])]),t("div",{staticClass:"filters__item__dropdown__menu",class:{"filters__item__dropdown__menu--visible":s.visible}},[t("div",{staticClass:"filters__item__helper-text font-text-small",domProps:{textContent:e._s(s.helperText)}}),t("yt-input-select",{attrs:{options:s.options,placeholder:s.placeholder,"allow-empty":!0,"track-by":"id",label:"label"},model:{value:s.value,callback:function(t){e.$set(s,"value",t)},expression:"filter.value"}})],1)]):e._e()])]})),t("Button",{staticClass:"filters__button",attrs:{text:e.$t("serp.filters.showTours"),hidden:!0},on:{click:function(t){return e.$emit("closeFilter")}}}),t("popup-individual-suggest",{model:{value:e.popups.individual,callback:function(t){e.$set(e.popups,"individual",t)},expression:"popups.individual"}})],2),t("div",[e._t("banner")],2)])},Me=[],$e=(s("cb29"),s("4fad"),s("5319"),s("25f0"),s("a15b"),s("4e82"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"checkbox-wrapper"},[t("div",{staticClass:"input g-visually-hidden",class:{checked:e.checked,disabled:e.disabled},attrs:{id:e.getId}}),t("label",{staticClass:"label",attrs:{for:e.getId}},[t("span",{staticClass:"checkbox",class:{disabled:e.disabled}})])])}),Ie=[],Be=s("8a8d"),Le={props:{checked:{type:Boolean,required:!0},disabled:{type:Boolean,default:!1},label:{type:String,default:""}},computed:{getId:function(){return Object(Be["a"])("checkbox")}}},Ee=Le,Re=(s("a980"),Object(k["a"])(Ee,$e,Ie,!1,null,"3e35006e",null)),Qe=Re.exports,Ae=s("3d6b"),Ve=function(){var e=this,t=e._self._c;return t("no-ssr",[t("VueSlider",e._b({ref:"slider",attrs:{value:e.propValue},on:{callback:function(t){return e.emitInput(t)},"drag-end":function(t){return e.$emit("drag-end")}}},"VueSlider",e.options,!1))],1)},Ne=[],qe=s("f92d"),We=s.n(qe),He=s("fb51"),Ue=s.n(He),ze={name:"input-range",data:function(){return{defaultOptions:{bgStyle:{background:Ue.a["gray-dark"],height:"4px"},sliderStyle:{background:Ue.a["green-main"],border:"2px solid #fff",transform:"translateY(-1px)",boxShadow:"none"},processStyle:{background:Ue.a["green-main"]},dotSize:20,tooltip:!1,enableCross:!1,minRange:0}}},components:{"no-ssr":We.a,VueSlider:vueOptions.ssr?{}:s("6f79")},props:{value:{type:[Number,Array],default:0},min:{type:Number,default:0},max:{type:Number,default:100}},computed:{propValue:function(){var e,t,s,i;return Array.isArray(this.value)&&!this.value.length?[0,100]:[+(null===(e=this.value)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.toString().replace(/\D/g,"")),+(null===(s=this.value)||void 0===s||null===(i=s[1])||void 0===i?void 0:i.toString().replace(/\D/g,""))]},options:function(){return Object(c["a"])(Object(c["a"])({},this.defaultOptions),{},{min:this.min,max:this.max})}},methods:{emitInput:function(e){this.$emit("input",e),!this.$refs.slider.flag&&this.$emit("drag-end",e)},refresh:function(){this.$refs.slider.refresh()}}},Ye=ze,Je=Object(k["a"])(Ye,Ve,Ne,!1,null,null,null),Xe=Je.exports,Ke=s("0787"),Ge=s("9fd8"),Ze=(s("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"radio",on:{click:function(t){return e.$emit("click")}}},[t("input",{staticClass:"radio-input",attrs:{type:"radio",name:e.name},domProps:{checked:e.checked}}),t("span",{staticClass:"radio-checkmark"})])}),et=[],tt={props:{checked:{type:Boolean,default:!1}}},st=tt,it=(s("3f6e"),Object(k["a"])(st,Ze,et,!1,null,"58af75d8",null)),rt=it.exports,nt=s("629e"),at=function(){var e=this,t=e._self._c;return t("no-ssr",[t("popup",{attrs:{size:"sm","class-name":"popup-individual-suggest"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("div",{staticClass:"popup-individual-suggest__container u-text-center"},[t("div",{staticClass:"popup-individual-suggest__icon"},[t("svg-inline",[t("icon",{attrs:{icon:"alarm-circle"}})],1)],1),t("div",{staticClass:"font-h1",domProps:{innerHTML:e._s(e.$t("popupIndividual.suggest.title"))}}),t("div",{staticClass:"popup-individual-suggest__text font-semibold",domProps:{innerHTML:e._s(e.$t("popupIndividual.suggest.text"))}}),t("Button",{staticClass:"u-w-full",attrs:{tag:"button",type:"button",color:"gray",text:e.$t("popupIndividual.suggest.button")},on:{click:function(t){e.visible=!1}}})],1)])],1)},ot=[],lt=s("852e"),ct=s.n(lt),ut=s("035a"),dt={components:{Popup:ut["a"],SvgInline:S["a"],Icon:_["a"],Button:g["a"],"no-ssr":We.a},model:{prop:"modelValue",event:"change"},props:{modelValue:{type:Boolean,required:!0}},data:function(){return{cookieName:"private-tour-suggestion-shown"}},computed:{visible:{get:function(){return this.modelValue&&!ct.a.get(this.cookieName)},set:function(e){e||ct.a.set(this.cookieName,!0,{expires:1}),this.$emit("change",e)}}},watch:{modelValue:function(e){e&&!this.visible&&this.$emit("change",!1)}}},pt=dt,ht=(s("f05b"),Object(k["a"])(pt,at,ot,!1,null,"0cf12802",null)),ft=ht.exports,vt=s("7507"),_t=s("b166"),mt=s("f628"),gt=s("8cac"),bt=s("b012"),yt=s("c85b"),kt=s("3d87");function wt(e){return I.get(e,{params:{get_page_meta_data:"Y"}})}function Ct(){return{getPageMetaData:wt}}var xt=s("35fb"),St={name:"filters",mixins:[vt["a"]],components:{Icon:_["a"],Checkbox:Qe,Input:Ae["a"],Range:Xe,Switcher:Ke["a"],Button:g["a"],ButtonSelect:Ge["a"],Radio:rt,YtInputSelect:nt["a"],Modal:m["a"],PopupIndividualSuggest:ft},props:{sortQuery:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{modalFilterId:null,isModal:!1,clientFilters:{duration:{label:this.$t("serp.filters.duration"),labelStart:this.$t("serp.filters.durationFrom"),labelEnd:this.$t("serp.filters.durationTo"),type:"range",value:[],min:0,max:100,visible:!0},types:{label:this.$t("serp.filters.travelType"),type:"checks",checks:[],visible:!1},prices:{label:this.$t("serp.filters.price"),labelStart:this.$t("serp.filters.from"),labelEnd:this.$t("serp.filters.to"),type:"range",value:[],min:0,max:1e6,visible:!0},spaces:{label:this.$t("serp.filters.spaces"),inputLabel:this.$t("serp.filters.spacesHelper"),type:"input",value:1,visible:!1},ratings:{label:this.$t("serp.filters.rating"),type:"radios",visible:!1,value:{label:this.$t("serp.filters.ratingChecks[0]"),min:null,max:null},radios:[{label:this.$t("serp.filters.ratingChecks[0]"),min:null,max:null},{label:this.$t("serp.filters.ratingChecks[1]"),min:"4.5",max:"5.0"},{label:this.$t("serp.filters.ratingChecks[2]"),min:"4.0",max:"5.0"},{label:this.$t("serp.filters.ratingChecks[3]"),min:"3.5",max:"5.0"},{label:this.$t("serp.filters.ratingChecks[4]"),min:"3.0",max:"5.0"}]},guarantees:{label:this.$t("serp.filters.guarantees"),helperText:this.$t("serp.filters.guaranteesHelper"),type:"switch",value:"B"===xt["a"].getSegment(14939)},comforts:{label:this.$t("serp.filters.comfort"),type:"checks",checks:[{key:"0",title:this.$t("serp.filters.comfortChecks[0]")},{key:"1",title:this.$t("serp.filters.comfortChecks[1]")},{key:"2",title:this.$t("serp.filters.comfortChecks[2]")},{key:"3",title:this.$t("serp.filters.comfortChecks[3]")},{key:["4","5"],title:this.$t("serp.filters.comfortChecks[4]")}],visible:!1},ages:{label:this.$t("serp.filters.ages"),type:"buttons-select",value:null,buttons:[{label:"18-39",min:18,max:39},{label:"30+",min:30,max:null},{label:"40+",min:40,max:null},{label:"50+",min:50,max:null},{label:"60+",min:60,max:null},{label:"70+",min:70,max:null}],visible:!1,placeholder:this.$t("serp.filters.agesPlaceholder"),input:{value:"",options:{label:this.$t("serp.filters.agesPlaceholder"),inputType:"number",numberBtns:!0}}},children:{label:this.$t("serp.filters.children"),helperText:this.$t("serp.filters.childrenHelper"),type:"select",value:null,options:[{id:null,label:this.$t("serp.filters.childrenAges.all")}].concat(Object(ve["a"])(Array(18).fill(1).map((function(t,s){return{id:s,label:e.$tc("serp.filters.childrenAges.year",s)}})))),placeholder:this.$t("serp.filters.childrenPlaceholder"),visible:!1},activities:{label:this.$t("serp.filters.activities"),type:"checks",checks:[{key:"1",title:this.$t("serp.filters.activitiesChecks[0]")},{key:"2",title:this.$t("serp.filters.activitiesChecks[1]")},{key:"3",title:this.$t("serp.filters.activitiesChecks[2]")},{key:"4",title:this.$t("serp.filters.activitiesChecks[3]")},{key:"5",title:this.$t("serp.filters.activitiesChecks[4]")}],visible:!1},only_private:{label:this.$t("serp.filters.private"),helperText:this.$t("serp.filters.privateHelper"),type:"switch",value:!1},languages:{label:this.$t("serp.filters.languages"),type:"checks",checks:[],visible:!1},have_installment:{label:this.$t("serp.filters.installment"),type:"switch",value:!1},discount:{label:this.$t("serp.filters.discount"),type:"switch",value:!1}},initCheckFilterId:null,initFilters:{},durationValue:[],pricesValue:[],hiddenFilters:"",pathname:"",popups:{individual:!1},checks:{comforts:[],activities:[],types:[],languages:[]},rightCheck:""}},computed:Object(c["a"])(Object(c["a"])({},Object(O["e"])({currency:function(e){return e.currency.currency},currencyChar:function(e){return e.currency.currency.title.charAt(0)},language:function(e){return e.language.language},query:function(e){return e.serp.serpQuery.query},facets:function(e){var t;return null===(t=e.serp.serpTours.facets)||void 0===t?void 0:t.data},initFacets:function(e){var t;return null===(t=e.serp.serpTours.initFacets)||void 0===t?void 0:t.data},strictPeriod:function(e){return e.serp.strictPeriod},dates:function(e){return e.serp.dates},location:function(e){return e.serp.location},only_exclusive:function(e){return e.serp.only_exclusive},productType:function(e){return e.serp.productType}})),{},{modalFilter:function(){var e;return(null===(e=this.clientFilters)||void 0===e?void 0:e[this.modalFilterId])||{}},isOneDayToursPage:function(){return"oneDay"===this.productType},isExclusiveToursPage:function(){return"exclusive"===this.productType},filtersQuery:function(){var e=this,t=Object($["a"])(),s=t.stringifyQuery,i=Object(c["a"])({is_period_strict:+this.strictPeriod,currency:this.currency.id.toLowerCase(),available_spaces:this.clientFilters.spaces.value,only_en:"en"===V["a"].locale?"1":"0",lang:V["a"].locale},this.hiddenFilters);switch(this.productType){case"oneDay":i.duration={},i.duration.from=1,i.duration.to=1;break;case"exclusive":i.only_exclusive=1;break;case"multiDays":default:i.duration={},i.duration.from=1;break}return this.location&&(i.loc={},this.location.forEach((function(e,t){var s={};"distance"===e.type?(s.type=e.type,s.lat=e.lat,s.lon=e.lon,s.radius=e.radius):(s.type=e.type,s.id=e.id),i.loc[t]=s}))),this.dates&&(i.period={},this.dates.forEach((function(e,t){var s=Object(X["a"])(e,3),r=s[0],n=s[1],a=s[2],o={},l=Object(_t["a"])(r,"dd.MM.yyyy"),c=Object(_t["a"])(n,"dd.MM.yyyy");"month"===a?o.month=l:(o.from=l,o.to=c),i.period[t]=o}))),this.clientFilters&&Object.entries(this.clientFilters).forEach((function(t){var s=Object(X["a"])(t,2),r=s[0],n=s[1],a=e.changedFilters.includes(r);if(a)switch(r){case"types":i.types=[],n.checks.filter((function(e){var t=e.selected;return t})).forEach((function(e){var t=e.key;i.types.push(t)}));break;case"activities":i.activity=[],n.checks.filter((function(e){var t=e.selected;return t})).forEach((function(e){var t=e.key;i.activity.push(t)}));break;case"comforts":i.comfort=[],n.checks.filter((function(e){var t=e.selected;return t})).forEach((function(e){var t=e.key;Array.isArray(t)?t.forEach((function(e){i.comfort.push(e)})):i.comfort.push(t)}));break;case"languages":i.languages=[],n.checks.filter((function(e){var t=e.selected;return t})).forEach((function(e){var t=e.key;i.languages.push(t)}));break;case"prices":if(i.price={},n.value.length){var o,l,c=+(null===(o=n.value)||void 0===o?void 0:o[0].toString().replace(/\D/g,"")),u=+(null===(l=n.value)||void 0===l?void 0:l[1].toString().replace(/\D/g,""));u<c&&(u=c,n.value[1]=c),i.price.from=c||n.min,i.price.to=u||n.max}break;case"duration":if(i.duration={},n.value.length){var d,p,h=null===(d=n.value)||void 0===d?void 0:d[0],f=null===(p=n.value)||void 0===p?void 0:p[1];f<h&&(f=h,n.value[1]=h),e.isOneDayToursPage||"1"!==h||"1"!==f?e.isOneDayToursPage&&"1"!==h&&"1"!==f&&(h=1,f=1):(h=n.min,f=n.max,e.clientFilters.duration.value=[n.min,n.max]),i.duration.from=h||n.min,i.duration.to=f||n.max}break;case"ages":if(i.age||(i.age={}),n.value){var v=n.value.min||n.min,_=n.value.max;console.log(_),null===_?(i.age.custom={from:{},to:{}},i.age.custom.from.lte=v,i.age.custom.to.gte=v):(i.age.from=v,_>v&&(i.age.to=_))}break;case"children":var m,g,b;i.age||(i.age={});var y=null===(m=n.value)||void 0===m||null===(g=m.id)||void 0===g?void 0:g.toString();y?i.age.from=y:isNaN(parseInt(null===n||void 0===n||null===(b=n.input)||void 0===b?void 0:b.value))||(i.age.from=n.input.value);break;case"ratings":n.value&&(i.rating={from:+n.value.min,to:+n.value.max});break;case"discount":n.value&&(i.have_discount=1);break;case"guarantees":n.value&&(i.have_guarantee=1);break;case"only_private":n.value&&(i.only_private=1);break;case"have_cashback":n.value&&(i.have_cashback=1);break;case"have_installment":n.value&&(i.have_installment=1);break}})),s(i)},changedFilters:function(){var e=[];return this.dates&&e.push("dates"),this.location&&e.push("location"),Object.entries(this.clientFilters).reduce((function(e,t){var s,i,r,n,a,o=Object(X["a"])(t,2),l=o[0],c=o[1];switch(l){case"duration":case"prices":var u,d;+(null===(u=c.value[0])||void 0===u?void 0:u.toString().replace(/\D/g,""))===c.min&&+(null===(d=c.value[1])||void 0===d?void 0:d.toString().replace(/\D/g,""))===c.max||e.push(l);break;case"comforts":case"activities":case"types":case"languages":var p=c.checks.find((function(e){var t=e.selected;return t}));p&&e.push(l);break;case"ages":case"ratings":(null!==c&&void 0!==c&&null!==(s=c.value)&&void 0!==s&&s.min||!isNaN(parseInt(null===c||void 0===c||null===(i=c.input)||void 0===i?void 0:i.value)))&&e.push(l);break;case"children":(null!==c&&void 0!==c&&null!==(r=c.value)&&void 0!==r&&null!==(n=r.id)&&void 0!==n&&n.toString()||null===(null===c||void 0===c||null===(a=c.value)||void 0===a?void 0:a.id))&&e.push(l);break;case"discount":case"only_private":case"guarantees":case"have_cashback":case"have_installment":c.value&&e.push(l);break;case"spaces":c.value>1&&e.push(l);break}return e}),e)},changedFiltersFormatted:function(){var e=this;return this.changedFilters.reduce((function(t,s){var i,r,n=e.clientFilters[s]||{},a=n.type,o=n.value,l=n.min,c=n.max,u=n.checks,d=n.label;switch(s){case"location":d=e.location[0].label;break;case"dates":var p=Object(X["a"])(e.dates,1),h=Object(X["a"])(p[0],2),f=h[0],v=h[1];d=["".concat(Object(_t["a"])(f,"dd.MM.yyyy")),"".concat(Object(_t["a"])(v,"dd.MM.yyyy"))].join(" - ");break;default:break}switch(a){case"range":var _=(null===l||void 0===l?void 0:l.toString())!==(null===(i=o[0])||void 0===i?void 0:i.toString().replace(/\D/g,"")),m=(null===c||void 0===c?void 0:c.toString())!==(null===(r=o[1])||void 0===r?void 0:r.toString().replace(/\D/g,""));d=_?"".concat(e.$t("serp.filters.from")," ").concat(o[0]," "):"",d+=m?"".concat(_?e.$t("serp.filters.to").toLowerCase():e.$t("serp.filters.to")," ").concat(o[1]," "):"",d+="duration"===s?e.$tc("serp.filters.durationDays",+o[m?1:0]):"";break;case"checks":var g=u.filter((function(e){var t=e.selected;return t})).map((function(e){var t=e.title;return t})),b=g.slice(2).length;d=g.slice(0,2).join(", "),d+=b?", ".concat(e.$t("serp.filters.checksMoreCount",{count:b})):"";break;case"buttons-select":case"select":case"radios":d+=": ".concat(o.label);break;case"input":"spaces"===s&&(d=e.$tc("serp.filters.spacesCounter",+o));break;default:break}return[].concat(Object(ve["a"])(t),[{code:s,label:d}])}),[])},getInstallmentPrices:function(){var e=this.clientFilters.prices.value;return{isFromOutOfRange:+e[0].toString().replace(/\D/g,"")<3e3||+e[0].toString().replace(/\D/g,"")>25e4,isToOutOfRange:+e[1].toString().replace(/\D/g,"")<3e3||+e[1].toString().replace(/\D/g,"")>25e4}},isRuLanguage:function(){return"ru"===V["a"].locale}}),watch:{location:{handler:function(){this.setPathname()},deep:!0},changedFiltersFormatted:{handler:function(e){this.$emit("changed-filters",e)},immediate:!0},"clientFilters.spaces.value":{handler:function(e,t){+e>=3&&t<3&&(this.popups.individual=!0)}},"clientFilters.types.checks":{handler:function(){this.setPathname()},deep:!0},"clientFilters.ages.value":{handler:function(e){e&&(this.clientFilters.children.value=null)},deep:!0},"clientFilters.children.value.id":{handler:function(e){(null!==e&&void 0!==e&&e.toString()||null===e)&&(this.clientFilters.ages.value=null)}},"clientFilters.have_installment.value":{handler:function(e){e&&this.setPriceForInstallment()},immediate:!0},"clientFilters.duration.value":{handler:function(e){e&&this.setRangeValue("duration",e)},immediate:!0},"clientFilters.prices.value":{handler:function(e){e&&this.setRangeValue("prices",e)},immediate:!0},changedFilters:{handler:function(e,t){if(!this.arrayEquals(e,t)){var s=["comforts","activities","types","languages"],i=null===e||void 0===e?void 0:e.filter((function(e){return!(null!==t&&void 0!==t&&t.includes(e))}))[0],r=s.includes(i);r?r&&(this.initCheckFilterId=i):this.initCheckFilterId=null;var n=null===t||void 0===t?void 0:t.filter((function(t){return!(null!==e&&void 0!==e&&e.includes(t))}))[0],a=s.includes(n);!a||e.length<=1?this.rightCheck="":a&&(this.rightCheck=n)}},immediate:!0},sortQuery:{handler:function(){this.setQueryParams(!0)},deep:!0}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(O["d"])({setLoadingTours:"serp/setLoadingTours",setShowReset:"serp/setShowReset",selectDates:"serp/selectDates",setStrictPeriod:"serp/setStrictPeriod",setIsOnlyExclusive:"serp/setIsOnlyExclusive",setProductType:"serp/setProductType"})),Object(O["b"])({selectLocation:"serp/selectLocation"})),{},{showModal:function(e){var t=e.filterId;this.modalFilterId=t,this.isModal=!0},triggerRange:function(e){this.clientFilters[e].value="prices"===e?Object(ve["a"])(this.pricesValue):Object(ve["a"])(this.durationValue)},isHiddenFilter:function(e){return this.isOneDayToursPage&&("duration"===e||"comforts"===e||"only_private"===e)},setRangeValue:function(e,t){if("prices"===e){var s=this.getPriceValue(t[0]),i=this.getPriceValue(t[1]);parseInt(i.replace(/\D/g,""))<parseInt(s.replace(/\D/g,""))&&(i=s),this.pricesValue=[s,i]}else{var r=t[0],n=t[1]<r?r:t[1];this.durationValue=[r,n]}},setInputValue:Object(bt["debounce"])((function(e,t,s){"prices"===e?this.pricesValue[s]=this.getPriceValue(t):this.durationValue[s]=+(null===t||void 0===t?void 0:t.toString().replace(/\D/g,"")),this.clientFilters[e].value.splice(s,1,"prices"===e?this.getPriceValue(t):+(null===t||void 0===t?void 0:t.toString().replace(/\D/g,"")))}),500),getPriceValue:function(e){return"".concat(this.currencyChar," ").concat((null===e||void 0===e?void 0:e.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g," "))||0)},setCheckValue:function(e){e.disabled||(e.selected=!e.selected,"1151"!==e.key||e.selected||ct.a.set("def_lang","0"))},setButtonSelect:function(e,t){var s;(null===e||void 0===e||null===(s=e.value)||void 0===s?void 0:s.label)===t.label?e.value=null:e.value=t},setChildAge:function(e){e=e.toString(),!isNaN(parseInt(e))&&e.length<=2?(this.clientFilters.ages.value=null,this.clientFilters.ages.input.value=parseInt(e)):this.clientFilters.ages.input.value=""},setClientFilters:function(e){var t=this,s=e.filters,i=e.init,r=void 0!==i&&i;this.clientFilters=Object.entries(s||{}).reduce((function(e,s){var i=Object(X["a"])(s,2),n=i[0],a=i[1];switch(n){case"duration":if(r){var o,l,u;1==(null===(o=t.query.duration)||void 0===o?void 0:o.from)&&1==(null===(l=t.query.duration)||void 0===l?void 0:l.to)?t.setProductType("oneDay"):1==(null===(u=t.query)||void 0===u?void 0:u.only_exclusive)&&t.setProductType("exclusive");var d=[a.min,Math.ceil(+a.max)];e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),{},{value:[a.min,Math.ceil(+a.max)],min:Math.ceil(+a.min),max:Math.ceil(+a.max)}),t.durationValue=d}else{var p=t.changedFilters.includes("duration")||!a.min&&!a.max?t.clientFilters[n].value:[a.min,Math.ceil(+a.max)];e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),{},{value:p,min:t.changedFilters.includes("duration")||!a.min&&!a.max?t.clientFilters[n].min:Math.ceil(+a.min),max:t.changedFilters.includes("duration")||!a.min&&!a.max?t.clientFilters[n].max:Math.ceil(+a.max)}),t.durationValue=p}break;case"prices":if(r){var h=[t.getPriceValue(Math.ceil(+a.min)),t.getPriceValue(Math.ceil(+a.max))];e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),{},{value:[t.getPriceValue(Math.ceil(+a.min)),t.getPriceValue(Math.ceil(+a.max))],min:Math.ceil(+a.min),max:Math.ceil(+a.max)}),t.pricesValue=h}else{var f=t.changedFilters.includes("prices")||!a.min&&!a.max?t.clientFilters[n].value:[t.getPriceValue(Math.ceil(+a.min)),t.getPriceValue(Math.ceil(+a.max))];e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),{},{value:f,min:t.changedFilters.includes("prices")||!a.min&&!a.max?t.clientFilters[n].min:Math.ceil(+a.min),max:t.changedFilters.includes("prices")||!a.min&&!a.max?t.clientFilters[n].max:Math.ceil(+a.max)}),t.pricesValue=f}break;case"comforts":case"activities":case"types":case"languages":var v=[];if(r)if("comforts"===n||"activities"===n)v=t.clientFilters[n].checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:!1,disabled:!1})}));else{var _=t.isRuLanguage?"1151":"1152";v=a.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:!1,disabled:!1})})).sort((function(e,t){return e.key===t.key?0:e.key===_?-1:t.key===_?1:e.title<t.title?-1:e.title>t.title?1:0}))}else{var m=t.clientFilters[n].checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{disabled:!e.selected&&(t.initCheckFilterId===n?e.disabled:!a.filter((function(t){return Array.isArray(e.key)?e.key.includes(t.key):t.key===e.key})).length)})}));t.rightCheck&&t.rightCheck===n?v=m:t.rightCheck&&t.rightCheck!==n?v=t.checks[n].length&&2===t.checks[n].length||1===t.checks[n].length?t.checks[n][1]:m:t.rightCheck||(v=m),v.length>5&&(v=v.sort((function(e,t){return t.selected-e.selected})).sort((function(e,t){return e.disabled-t.disabled}))),t.checks[n].length>=2&&t.checks[n].pop(),t.checks[n].unshift(Object(ve["a"])(v))}e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),{},{checks:v});break;case"discount":case"only_private":case"guarantees":e[n]=Object(c["a"])({},t.clientFilters[n]);break;case"ages":case"spaces":case"ratings":e[n]=Object(c["a"])(Object(c["a"])({},t.clientFilters[n]),a);break}return e}),this.clientFilters),this.$emit("setParticipants",this.clientFilters.spaces.value),r&&(this.initFilters=JSON.parse(JSON.stringify(this.clientFilters)))},resetFilters:function(){var e=Object($["a"])(),t=e.stringifyQuery,s=t(this.sortQuery),i="".concat(fakeWindow.location.pathname,"?").concat(s);this.rightCheck="",this.checks={comforts:[],activities:[],types:[],languages:[]},this.clientFilters=JSON.parse(JSON.stringify(this.initFilters)),this.pushStateToHistory({},document.title,i),this.hiddenFilters="",this.selectDates(null),this.selectLocation(null),this.setShowReset(!1)},resetFilter:function(e){this.checks[e]=[],this.clientFilters[e]=Object(c["a"])(Object(c["a"])({},this.initFilters[e]),{},{visible:this.clientFilters[e].visible})},refresh:function(){var e,t;this.$refs.rangeduration&&(null===(t=this.$refs.rangeduration[0])||void 0===t||t.refresh());null===(e=this.$refs.rangeprices[0])||void 0===e||e.refresh()},readQueryParams:function(){var e=this,t=Object(c["a"])({},this.clientFilters);this.hiddenFilters={},Object.entries(this.query).forEach((function(s){var i=Object(X["a"])(s,2),r=i[0],n=i[1];switch(r){case"period":var a=Object.values(n).map((function(e){var t=e.from,s=e.to,i=e.month;return i?[Object(mt["a"])(Object(G["a"])(i,"dd.MM.yyyy",new Date)),Object(gt["a"])(Object(G["a"])(i,"dd.MM.yyyy",new Date)),"month"]:[Object(G["a"])(t,"dd.MM.yyyy",new Date),Object(G["a"])(s,"dd.MM.yyyy",new Date)]}));e.selectDates(a),e.setShowReset(!0);break;case"loc":e.setShowReset(!0);break;case"activity":t.activities.checks=t.activities.checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:n.includes(e.key)})})),t.activities.visible=!0,e.setShowReset(!0);break;case"types":t.types.checks=t.types.checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:n.includes(e.key)})})),t.types.visible=!0,e.setShowReset(!0);break;case"age":var o,l;if(+(null===n||void 0===n?void 0:n.from)>=18&&null!==n&&void 0!==n&&n.to){var u=t.ages.buttons.find((function(e){var t=e.min;return t===+n.from}));t.ages.value=u,t.ages.visible=!0}else if(+(null===n||void 0===n||null===(o=n.custom)||void 0===o||null===(l=o.from)||void 0===l?void 0:l.lte)>18){var d=t.ages.buttons.find((function(e){var t,s,i=e.min;return i===+(null===n||void 0===n||null===(t=n.custom)||void 0===t||null===(s=t.from)||void 0===s?void 0:s.lte)}));t.ages.value=d,t.ages.visible=!0}+(null===n||void 0===n?void 0:n.from)<18&&(null===n||void 0===n||!n.to)&&(t.children.value=t.children.options.find((function(e){var t=e.id;return(null===t||void 0===t?void 0:t.toString())===n.from.toString()})),t.children.visible=!0),e.setShowReset(!0);break;case"available_spaces":t.spaces.value=n,e.setShowReset(!0);break;case"comfort":t.comforts.checks=t.comforts.checks.map((function(e){return Array.isArray(e.key)?Object(c["a"])(Object(c["a"])({},e),{},{selected:e.key.some((function(e){return n.includes(e)}))}):Object(c["a"])(Object(c["a"])({},e),{},{selected:n.includes(e.key)})})),t.comforts.visible=!0,e.setShowReset(!0);break;case"duration":null!==n&&void 0!==n&&n.from&&(t.duration.value[0]=n.from,e.durationValue[0]=n.from),null!==n&&void 0!==n&&n.to&&(t.duration.value[1]=n.to,e.durationValue[1]=n.to),e.setShowReset(!0);break;case"price":null!==n&&void 0!==n&&n.from&&(t.prices.value[0]=e.getPriceValue(n.from),e.pricesValue[0]=e.getPriceValue(n.from)),null!==n&&void 0!==n&&n.to&&(t.prices.value[1]=e.getPriceValue(Math.ceil(+n.to)),e.pricesValue[1]=e.getPriceValue(Math.ceil(+n.to))),e.setShowReset(!0);break;case"have_discount":t.discount.value=!!n,e.setShowReset(!0);break;case"have_guarantee":t.guarantees.value=!!n,e.setShowReset(!0);break;case"only_private":t.only_private.value=!!n,e.setShowReset(!0);break;case"is_period_strict":e.setStrictPeriod(!!+n);break;case"lang":var p=!!t.languages.checks.find((function(e){return!0===e.selected}));if(!1===p){var h="ru"===n&&"ru"===ct.a.get("def_lang"),f="en"===n;t.languages.checks=t.languages.checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:h?"1151"===e.key:!!f&&"1152"===e.key})}))}t.languages.visible=!0,e.setShowReset(!0);break;case"languages":t.languages.checks=t.languages.checks.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{selected:n.includes(e.key)})})),t.languages.visible=!0,e.setShowReset(!0);break;case"rating":if(n.from){var v=t.ratings.radios.find((function(e){return+e.min===+n.from}));t.ratings.value=v,t.ratings.visible=!0}e.setShowReset(!0);break;case"have_cashback":t.have_cashback.value=!!n,e.setShowReset(!0);break;case"have_installment":t.have_installment.value=!!n,e.setShowReset(!0);break;case"only_exclusive":e.setIsOnlyExclusive(!!+n);break;case"excluded_tours":case"experts":case"ids":case"master_iata":case"have_early_booking":case"only_weekend":case"only_en":e.hiddenFilters[r]=n;break}})),this.clientFilters=Object(c["a"])({},t),this.query.period||this.query.loc||this.changedFilters.length||this.hiddenFilters?this.getFacets():this.onFacetsLoaded()},onFacetsLoaded:function(){var e=Object($["a"])(),t=e.parseString;this.$emit("loadedFacets",t(this.filtersQuery))},setQueryParams:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";if(this.isOneDayToursPage?t="days-1":this.isExclusiveToursPage&&(t="exclusive"),this.changedFilters.length||this.location||this.dates||this.hiddenFilters||e){var s=fakeWindow.location.pathname,i=this.clientFilters.types.checks.filter((function(e){var t=e.selected;return t})),r=-1!==s.indexOf("/specials/");if(!r)switch(this.pathname){case"country":s="/tours/".concat(this.location[0].type,"/").concat(this.location[0].code);break;case"type":s="/tours/type/".concat(i[0].code);break;case"location":s="/tours/".concat(this.location[0].type,"/").concat(this.location[0].code);break;default:s="/tours/"}var n=s;t&&(s+="/tours/"===s?"".concat(t):"/".concat(t)),s!==fakeWindow.location.pathname?this.getPageMetaData(s,n):this.updateUrlByPath(s),!e&&this.setShowReset(!0)}else{var a="/tours/"+t;this.getPageMetaData(a),this.pushStateToHistory({},document.title,a),this.setShowReset(!1)}},setPathname:function(){var e,t,s,i;1===(null===(e=this.location)||void 0===e?void 0:e.length)&&"location"!==this.location[0].type&&1!==this.clientFilters.types.checks.filter((function(e){var t=e.selected;return t})).length?this.pathname="country":this.location&&1===(null===(t=this.location)||void 0===t?void 0:t.length)||1!==this.clientFilters.types.checks.filter((function(e){var t=e.selected;return t})).length?1===(null===(s=this.location)||void 0===s?void 0:s.length)&&"location"===this.location[0].type?this.pathname="location":this.location&&1===(null===(i=this.location)||void 0===i?void 0:i.length)||1===this.clientFilters.types.checks.filter((function(e){var t=e.selected;return t})).length||(this.pathname=""):this.pathname="type"},setMetaData:function(e){var t,s=e.breadcrumb,i=e.canonical_url,r=e.meta_description,n=e.meta_title,a=e.serp_footer_seo_text,o=e.serp_header_seo_text,l=e.title,c=e.tours_by_month,u=e.tours_by_routes,d=e.tours_by_seo_categories,p=document.getElementsByClassName("tours-body")[1];document.querySelector('link[rel="canonical"]').setAttribute("href",i),document.querySelector('meta[name="description"]').setAttribute("content",r),document.querySelector('meta[property="og:description"]').setAttribute("content",r),document.querySelector("title").textContent=n;var h=document.getElementsByClassName("breadcrumbs")[0].children;while(h.length!==s.length)if(h.length>s.length)h[0].remove();else if(h.length<s.length){var f=h[0].cloneNode(!0);document.getElementsByClassName("breadcrumbs")[0].prepend(f)}for(var v=1,_=s.length-1;_>=0;_--){var m=h[h.length-v];"DIV"===m.tagName?m.children[0].textContent=s[_].title:(m.children[0].children[0].textContent=s[_].title,m.children[0].href=s[_].link),v++}if(1===(null===(t=this.location)||void 0===t?void 0:t.length)&&695===this.location[0].id&&"region"===this.location[0].type){var g=document.getElementsByClassName("js-tolstoy");if(g.length){var b=document.createElement("div");b.setAttribute("data-publish-id","mq2mjn2u1vs7j"),b.setAttribute("class","tolstoy-stories"),g[0].append(b)}}else{var y=document.getElementsByClassName("tolstoy-stories");y.length&&y[0].remove()}document.getElementsByClassName("header-h1")[0].children[0].textContent=l;var k=document.getElementsByClassName("tours-by-month");k.length&&k[0].remove(),null!==c&&void 0!==c&&c.length&&p.appendChild(this.setToursTags(c,"tours-month-list--month","show-more-month",this.$t("serp.seo.toursByMonth"),"tours-by-month"));var w=document.getElementsByClassName("tours-by-routes");while(w.length)w[0].remove();null!==u&&void 0!==u&&u.length&&p.appendChild(this.setToursTags(u,"tours-month-list--routes","show-more-routes",this.$t("serp.seo.toursByRoutes"),"tours-by-routes"));var C=document.getElementsByClassName("seo-uppercontent");if(C.length&&C[0].remove(),o){var x=document.createElement("section"),S=document.getElementsByClassName("header-h1 ");x.classList.add("seo-uppercontent","content","seo-text-content","show"),x.innerHTML=o,S[0].insertAdjacentElement("afterend",x)}for(var O in d){var T,j=d[O];null!==(T=j.ITEMS)&&void 0!==T&&T.length&&p.appendChild(this.setToursTags(j.ITEMS,"tours-month-list--routes","show-more-routes",j.CATEGORY_NAME,"tours-by-routes"))}var F=document.getElementsByClassName("seo-section");if(F.length&&F[0].remove(),a){var P=document.createElement("div"),D=document.createElement("div"),M=document.createElement("div"),$=document.createElement("section"),I=document.createElement("div");M.classList.add("seo-section-gradient"),I.classList.add("seo-content-wrapper"),I.innerHTML=a,I.appendChild(M),D.classList.add("seo-section__read-more"),D.innerHTML=this.$t("serp.seo.readMore"),$.classList.add("content"),$.appendChild(I),$.appendChild(D),P.classList.add("seo-section"),P.appendChild($),p.appendChild(P)}fakeWindow.applySeoTextTranforms()},setToursTags:function(e,t,s,i,r){var n=document.createElement("div"),a=document.createElement("div"),o=document.createElement("h2"),l=document.createElement("div"),c=document.createElement("div"),u=!1;l.classList.add("js-show-more-container","tours-month-list",t);for(var d=0;d<e.length;d++){var p=document.createElement("a");d>6&&(p.classList.add("tours-month-item--hidden"),u=!0),p.classList.add("tours-month-item","tours-month-item--month"),p.href=e[d].link,p.innerHTML=e[d].title,l.appendChild(p)}return u&&(c.classList.add("js-show-more-btn","tours-month__show-more",s),c.innerHTML=this.$t("serp.seo.showMore"),l.append(c)),o.innerHTML=i,a.appendChild(o),a.appendChild(l),n.classList.add("tours-month",r),n.appendChild(a),n},setTypeTour:function(){var e=vueOptions.ssr?context.url:window.location.pathname,t=-1!==e.indexOf("/days-1"),s=-1!==e.indexOf("/exclusive");(t||s)&&(t&&this.setProductType("oneDay"),s&&this.setProductType("exclusive"),this.getPageMetaData(e,!1,!1))},setPriceForInstallment:function(){var e=this.currency.id.toLowerCase(),t=Object(ve["a"])(this.clientFilters.prices.value);"rub"===e&&(this.getInstallmentPrices.isFromOutOfRange&&(t[0]=this.getPriceValue(3e3)),this.getInstallmentPrices.isToOutOfRange&&(t[1]=this.getPriceValue(25e4)),this.pricesValue=t,this.clientFilters.prices.value=t)},getFacets:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i,r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(kt["a"])(),i=s.getToursFacets,e.setLoadingTours(!0),t.prev=2,r=e.filtersQuery,t.next=6,i(r);case 6:n=t.sent,a=n.filters,e.setClientFilters({filters:a}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0);case 14:return t.prev=14,e.onFacetsLoaded(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))()},updateUrlByPath:function(e){var t=Object($["a"])(),s=t.stringifyQuery,i=s(this.sortQuery),r="".concat(e,"?").concat(this.filtersQuery,"&").concat(i);this.pushStateToHistory(null,document.title,r)},getPageMetaData:function(e){var t=arguments,s=this;return Object(p["a"])(regeneratorRuntime.mark((function i(){var r,n,a,o,l,c,u,d,p;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.length>1&&void 0!==t[1]&&t[1],n=!(t.length>2&&void 0!==t[2])||t[2],a=!1,o=Ct(),l=o.getPageMetaData,i.prev=4,i.next=7,l(e);case 7:c=i.sent,u=c.data,s.setMetaData(u),n&&s.updateUrlByPath(e),i.next=16;break;case 13:i.prev=13,i.t0=i["catch"](4),a=i.t0;case 16:if(!a||!r){i.next=30;break}return i.prev=17,i.next=20,l(r);case 20:d=i.sent,p=d.data,s.setMetaData(p),s.updateUrlByPath(r),a=!1,i.next=30;break;case 27:i.prev=27,i.t1=i["catch"](17),a=i.t1;case 30:a&&s.getBackendErrorMessage(a);case 31:case"end":return i.stop()}}),i,null,[[4,13],[17,27]])})))()},init:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,null===(s=e.query)||void 0===s||null===(i=s.loc)||void 0===i||!i.length){t.next=4;break}return t.next=4,e.selectLocation(e.query.loc);case 4:return t.next=6,e.readQueryParams();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},getBackendErrorMessage:yt["a"]}),mounted:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"0"!==ct.a.get("def_lang")&&"ru"===e.query.lang&&ct.a.set("def_lang","ru"),t.next=3,e.init();case 3:e.$watch("filtersQuery",(function(){e.getFacets(),e.setQueryParams()}));case 4:case"end":return t.stop()}}),t)})))()},created:function(){var e;this.setTypeTour(),this.isRuLanguage||delete this.clientFilters.have_installment,this.setClientFilters({filters:(null===(e=this.initFacets)||void 0===e?void 0:e.filters)||{},init:!0})}},Ot=St,Tt=(s("cd22"),Object(k["a"])(Ot,De,Me,!1,null,"017434b4",null)),jt=Tt.exports,Ft=s("a597"),Pt=(s("b3e9"),"B"===xt["a"].getSegment("NYRANK")?"rank_calculated":"rank"),Dt={name:"tours",mixins:[vt["a"]],components:{Icon:_["a"],Button:g["a"],YtPill:Fe,Filters:jt,TourCard:Pe["a"],BannerSerp:we},data:function(){return{showSortDropdown:!1,isShowFilter:!1,tours:null,total:0,recommendedTotal:0,sponsoredTotal:0,filtersQuery:{},participants:1,sortButtons:[{label:this.$t("serp.tours.sortBy.popular"),sortBy:Pt,sortDir:"desc",selected:"B"!==xt["a"].getSegment("ml_playground")},{label:this.$t("serp.tours.sortBy.recommended"),sortBy:"recommended",sortDir:"desc",selected:"B"===xt["a"].getSegment("ml_playground")},{label:this.$t("serp.tours.sortBy.new"),sortBy:"first_date_publish",sortDir:"desc",selected:!1},{label:this.$t("serp.tours.sortBy.closest"),sortBy:"nearest_date",sortDir:"asc",selected:!1},{label:this.$t("serp.tours.sortBy.priceLow"),sortBy:"price",sortDir:"asc",selected:!1},{label:this.$t("serp.tours.sortBy.priceHigh"),sortBy:"price",sortDir:"desc",selected:!1},{label:this.$t("serp.tours.sortBy.discount"),sortBy:"discount",sortDir:"desc",selected:!1}],take:20,skip:0,guid:"",changedFilters:[],controller:null,signal:null,seoTextOpened:!1,excluded_front_tours:new Set,bannersSerp:[]}},watch:{isShowFilter:function(e){var t=this;e&&this.$nextTick((function(){return t.$refs.filters.refresh()}))},sortQuery:function(){this.loadTours()}},computed:Object(c["a"])(Object(c["a"])({},Object(O["e"])({currency:function(e){return e.currency.currency},language:function(e){return e.language.language},loading:function(e){return e.serp.loading},loadingTours:function(e){return e.serp.loadingTours},ssrTours:function(e){var t,s;return null===(t=e.serp.serpTours.tours)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.items},ssrTotal:function(e){var t,s;return null===(t=e.serp.serpTours.tours)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.total},showReset:function(e){return e.serp.showReset},query:function(e){return e.serp.serpQuery.query},isUserLoggedIn:function(e){return e.user.user.isLoggedIn},serpSeoText:function(e){return e.serp.serpSeoText.seoText},isCashbackPage:function(e){return e.serp.isCashbackPage.isCashbackPage},facets:function(e){return e.serp.serpTours.facets.data},productType:function(e){return e.serp.productType},ssrBannersSerp:function(e){var t;return null===(t=e.serp.serpTours.bannersSerp)||void 0===t?void 0:t.data}})),{},{isExclusiveProduct:function(){return"exclusive"===this.productType},filteredTours:function(){if(this.tours){var e=this.tours.filter((function(e){return e}));return this.loadingTours&&this.skip?e.concat(e.slice(0,20)):(e.forEach((function(e){e.imageLazy=!0})),e[0].imageLazy=!1,e)}return[]},isShowMore:function(){var e;return this.total>(null===this||void 0===this||null===(e=this.tours)||void 0===e?void 0:e.length)},selectedSorting:function(){return this.sortButtons.find((function(e){var t=e.selected;return t}))||this.sortButtons[0]},toursQuery:function(){return Object(c["a"])(Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.filtersQuery),this.userQuery),this.sortQuery),{},{take:this.take,skip:this.skip})},loadMoreToursQuery:function(){return Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.toursQuery),this.excludedQuery),this.excludedFrontQuery)},userQuery:function(){var e={};if(!vueOptions.ssr){var t=Ft["a"].getCookie("BX_USER_ID"),s="guest";if(this.isUserLoggedIn&&(t=Ft["a"].getCookie("BITRIX_SM_USER_BX_ID"),s="user"),!t){t=Ft["a"].guid();var i=new Date(Date.now()+31536e6);Ft["a"].setCookie("BX_USER_ID",t,{expires:i.toUTCString()})}e.user={id:t,type:s},e.search_guid=this.guid}return e},sortQuery:function(){return{sort_by:this.selectedSorting.sortBy,sort_dir:this.selectedSorting.sortDir}},excludedQuery:function(){var e={};return"rank"===this.selectedSorting.sortBy&&this.tours&&(e.excluded_tours=[],this.tours.forEach((function(t){t.is_latest&&e.excluded_tours.push(t.id)}))),e},excludedFrontQuery:function(){var e={excluded_front_tours:[]};return Object(ve["a"])(this.excluded_front_tours).forEach((function(t,s){e.excluded_front_tours.push(s)}))},recommendedToursQuery:function(){return Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.filtersQuery),this.userQuery),{},{currency:this.currency.id.toLowerCase(),lang:this.language.id,take:Math.floor(.3*+this.tours.length),sort_by:"recommended",sort_dir:"desc",skip:0})},listingToursQuery:function(){var e={},t=this.toursQuery["types[0]"],s={id:this.toursQuery["loc[0][id]"],type:this.toursQuery["loc[0][type]"]},i=vueOptions.ssr?context.url:window.location.pathname,r=-1!==i.indexOf("/type/")&&!(null!==s&&void 0!==s&&s.id),n=!r&&!(null!==s&&void 0!==s&&s.id),a=!r&&(null===s||void 0===s?void 0:s.id),o=-1!==i.indexOf("/specials/");if(o){var l=i.split("/");return e.listingType="specials",e.elementId=l[3],e}return n?e.listingType="main-listing":a&&!this.toursQuery["loc[1][id]"]?(e.listingType=null===s||void 0===s?void 0:s.type,e.elementId=null===s||void 0===s?void 0:s.id):r&&!this.toursQuery["types[1]"]&&(e.listingType="type",e.elementId=t),e},doubleBanners:function(){var e,t=null===(e=this.bannersSerp)||void 0===e?void 0:e.filter((function(e){return e.position>=4&&!e.isImageForMobile}));return 2===t.length&&t},filteredBanners:function(){var e;return null===(e=this.bannersSerp)||void 0===e?void 0:e.filter((function(e){return e.position>1&&e.position<4||e.position>=4&&e.isImageForMobile}))},firstBanners:function(){var e;return null===(e=this.bannersSerp)||void 0===e?void 0:e.filter((function(e){return 1===e.position}))}}),methods:Object(c["a"])(Object(c["a"])({},Object(O["d"])("serp",["setLoadingTours","setFavorite","selectLocation","selectDates","setIsOnlyExclusive","setProductType"])),{},{queryToString:function(e){var t=Object($["a"])(),s=t.stringifyQuery;return s(e)},loadTours:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i,r,n,a,o,l,u,d,p,h,f,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object($["a"])(),i=s.stringifyQuery,r=Object(kt["a"])(),n=r.getToursSearch,a=r.getBannersSerp,t.prev=2,o=i(e.toursQuery),t.next=6,n(o);case 6:return l=t.sent,u=l.items,d=l.total,p=l.metadata,u.length?(h=u,f=h.length,v=0,e.isIosApp&&(h=h.filter((function(e){return!(e.regions.includes("Крым")||e.title.toLowerCase().includes("крым"))})),v=f-h.length),h.length?(e.tours=h.map((function(e){return Object(c["a"])(Object(c["a"])({},e),{},{recommended:!1,meta:p})})),e.total=d-v):(e.tours=[],e.total=0),vueOptions.ssr||e.trackSearchRequest(),e.selectedSorting.sortBy===Pt&&"A"!==xt["a"].getSegment("ml_playground")&&(e.signal&&e.controller.abort(),e.loadRecommendedTours(),e.loadTourPromoListing())):(vueOptions.ssr||e.trackNotfoundRequest(),e.tours=[],e.total=0),t.next=13,a(o);case 13:e.bannersSerp=t.sent,t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](2),console.log(t.t0);case 19:return t.prev=19,e.setLoadingTours(!1),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[2,16,19,22]])})))()},loadMoreTours:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i,r,n,a,o,l,c,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object($["a"])(),i=s.stringifyQuery,r=Object(kt["a"])(),n=r.getToursSearch,e.setLoadingTours(!0),e.skip=e.skip+20,t.prev=4,a=i(e.loadMoreToursQuery),t.next=8,n(a);case 8:o=t.sent,l=o.items,l.length&&(u=l.filter((function(t){return-1===e.tours.findIndex((function(e){var s=e.id;return s===t.id}))})),d=u.length,e.isIosApp&&(u=u.filter((function(e){return!(e.regions.includes("Крым")||e.title.toLowerCase().includes("крым"))})),e.total=e.total-(d-u.length)),(c=e.tours).push.apply(c,Object(ve["a"])(u))),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),console.error(t.t0);case 16:return t.prev=16,e.setLoadingTours(!1),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,13,16,19]])})))()},loadRecommendedTours:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i,r,n,a,o,l,u,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object($["a"])(),i=s.stringifyQuery,r=Object(kt["a"])(),n=r.getToursSearch,e.controller=new AbortController,e.signal=e.controller.signal,t.prev=4,a=i(e.recommendedToursQuery),t.next=8,n(a,e.signal);case 8:o=t.sent,l=o.items,u=o.metadata,e.signal=null,d=l,e.isIosApp&&(d=d.filter((function(e){return!e.regions.includes("Крым")}))),d.forEach((function(t){var s=e.tours.findIndex((function(e){return e.id===t.id}));if(-1!==s)e.tours[s].recommended=!0,e.tours[s].meta=u;else{var i=Math.floor(Math.random()*(e.tours.length-0+1));e.tours.splice(i,0,Object(c["a"])(Object(c["a"])({},t),{},{recommended:!0,meta:u})),e.excluded_front_tours.add(t.id)}})),t.next=20;break;case 17:t.prev=17,t.t0=t["catch"](4),console.error(t.t0);case 20:case"end":return t.stop()}}),t,null,[[4,17]])})))()},loadTourPromoListing:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var s,i,r,n,a,o,l,u,d,p,h,f,v,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=Object($["a"])(),i=s.stringifyQuery,r=Object(kt["a"])(),n=r.getListingTours,a=r.getToursSearch,!Object.keys(e.listingToursQuery)){t.next=26;break}return t.prev=3,l=i(e.listingToursQuery),t.next=7,n(l);case 7:if(u=t.sent,null===(o=u.data)||void 0===o||!o.length){t.next=21;break}return d=u.data.map((function(e){return e.id})),p=e.getTourPromoListingQuery(d),h=i(p),e.controller=new AbortController,e.signal=e.controller.signal,t.next=16,a(h,e.signal);case 16:f=t.sent,v=f.items,e.signal=null,_=0,v.forEach((function(t){var s=e.tours.findIndex((function(e){return e.id===t.id}));-1!==s?e.tours.splice(s,1):e.excluded_front_tours.add(t.id);var i=u.data.findIndex((function(e){return e.id==t.id})),r=e.getRandomIntInRange(_,_+2);-1!=i&&u.data[i].position&&(r=u.data[i].position-1),e.tours.splice(r,0,Object(c["a"])(Object(c["a"])({},t),{},{sponsored:!0,meta:{sponsored:!0}})),_=_<e.tours.length-3?_+3:_}));case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](3),console.error(t.t0);case 26:case"end":return t.stop()}}),t,null,[[3,23]])})))()},showFilter:function(){this.isShowFilter=!0},onLoadedFacets:function(e){this.guid=Ft["a"].guid(),this.filtersQuery=e,this.skip=0,this.loadTours()},selectSort:function(e){this.sortButtons[e].selected||(this.guid=Ft["a"].guid(),this.skip=0,this.setLoadingTours(!0),this.showSortDropdown=!1,this.sortButtons.forEach((function(t,s){t.selected=s===e})))},getTourPromoListingQuery:function(e){var t=Object(c["a"])(Object(c["a"])(Object(c["a"])({},this.filtersQuery),this.userQuery),{},{ids:[],currency:this.currency.id.toLowerCase(),lang:this.language.id,skip:0});return e&&(t.ids=e,t.take=e.length<7?7:e.length),t},trackNotfoundRequest:function(){v["a"].track("Tour list","Show Nothing found",this.productType)},trackSearchRequest:function(){"undefined"!==typeof youtravel.DataCollector&&youtravel.DataCollector.trackEvent("Tour list","Send search request",{filter:this.toursQuery,additional:{lang:this.language.id,productType:this.productType,total:this.total,datetime:(new Date).toISOString()}}),v["a"].track("Tour list","Send Search request",this.productType,{type:this.productType,total:this.total})},getRandomIntInRange:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},resetFilter:function(e){"location"!==e?"dates"!==e?this.$refs.filters.resetFilter(e):this.selectDates(null):this.selectLocation(null)},moreSeoTextDropdown:function(){this.seoTextOpened=!this.seoTextOpened},menuTabClickHandler:function(e){this.setProductType(e),this.setIsOnlyExclusive("exclusive"===e)}}),beforeDestroy:function(){fakeWindow.removeEventListener("click"),fakeWindow.removeEventListener("resize"),fakeWindow.removeEventListener("lazybeforeunveil"),fakeWindow.removeEventListener("scroll")},created:function(){var e=this;this.ssrTours&&this.ssrTours.length&&(this.tours=this.ssrTours,this.total=Array.isArray(this.ssrTotal)?this.ssrTotal[0]:this.ssrTotal),this.ssrBannersSerp&&this.ssrBannersSerp.length&&(this.bannersSerp=this.ssrBannersSerp),vueOptions.ssr||(this.controller=new AbortController,history.scrollRestoration="manual",fakeWindow.scrollTo(0,0),fakeWindow.innerWidth>=1024&&(this.isShowFilter=!0),this.query.sort_by&&this.sortButtons.forEach((function(t){"price"===e.query.sort_by&&"price"===t.sortBy?t.selected=t.sortDir===e.query.sort_dir:e.query.sort_by===t.sortBy?(t.sortDir=e.query.sort_dir,t.selected=!0):t.selected=!1})),this.$watch("sortQuery",(function(){e.loadTours()})),fakeWindow.addEventListener("click",(function(t){e.$refs.dropdown.contains(t.target)||(e.showSortDropdown=!1)})),fakeWindow.addEventListener("resize",(function(){fakeWindow.innerWidth>=1024&&(e.isShowFilter=!0)})),fakeWindow.addEventListener("lazybeforeunveil",(function(t){if("undefined"!==typeof youtravel.DataCollector&&!vueOptions.ssr){var s=t.target.closest(".tour-card");youtravel.DataCollector.trackEvent("Tour list","View Tour item",{tour_id:s.dataset.id||"",list:s.dataset.list||"",filter:e.toursQuery,meta:s.dataset.meta?JSON.parse(s.dataset.meta):{},additional:{}})}})),fakeWindow.addEventListener("scroll",(function(){fakeWindow.scrollY+fakeWindow.innerHeight>=e.$refs.results.scrollHeight&&!e.loadingTours&&e.isShowMore&&e.loadMoreTours()})))}},Mt=Dt,$t=(s("7c66"),Object(k["a"])(Mt,he,fe,!1,null,"9e643754",null)),It=$t.exports,Bt={name:"serp",components:{TopMenu:pe,Tours:It},methods:Object(c["a"])({},Object(O["d"])({setUser:"user/setUser"})),mounted:function(){var e=this;fakeWindow.addEventListener("Auth::data",(function(t){t.detail.user.isLoggedIn&&e.setUser(t.detail.user)})),fakeWindow.addEventListener("Auth::user",(function(t){t.detail&&e.setUser(t.detail)})),fakeWindow.addEventListener("header::show",(function(t){e.showHeader=t.detail}))}},Lt=Bt,Et=(s("7d5f"),Object(k["a"])(Lt,o,l,!1,null,null,null)),Rt=Et.exports,Qt=s("4360");function At(){var e=new i["default"]({store:Qt["a"],i18n:V["a"],render:function(e){return e(Rt)}});return{app:e}}i["default"].use(n.a),i["default"].use(a["a"],{bodyScrollOptions:{reserveScrollBarGap:!0,allowTouchMove:function(e){return e.closest(".multiselect__content-wrapper")}}});var Vt=At(),Nt=Vt.app;Nt.$mount("#serp")},"56f7":function(e,t,s){},"5b19":function(e,t,s){"use strict";s("38c9")},"61d6":function(e,t,s){"use strict";s("9b11")},"740c":function(e,t,s){},"7c66":function(e,t,s){"use strict";s("4866")},"7d5f":function(e,t,s){"use strict";s("ad68")},"84c6":function(e,t,s){},"931d":function(e,t,s){},9649:function(e,t,s){"use strict";s("0158")},"9b11":function(e,t,s){},"9f78":function(e,t,s){"use strict";s("931d")},a980:function(e,t,s){"use strict";s("56f7")},ad68:function(e,t,s){e.exports={white:"#fff",black:"#121212","pitch-black":"#000",secondary:"#9999a9",red:"#f84565","green-main":"#abc232","green-hover":"#9aae2d","green-dark":"#87a038","gray-dark":"#d1d7e8","gray-hover":"#e4e4e8","gray-light":"#eeeef2"}},b057:function(e,t,s){"use strict";s("c475")},c020:function(e,t,s){"use strict";s("84c6")},c475:function(e,t,s){},cd22:function(e,t,s){"use strict";s("eb28")},eb28:function(e,t,s){},ed3f:function(e,t,s){},f05b:function(e,t,s){"use strict";s("740c")},fb51:function(e,t,s){e.exports={white:"#fff",black:"#121212","pitch-black":"#000",secondary:"#9999a9",red:"#f84565","green-main":"#abc232","green-hover":"#9aae2d","green-dark":"#87a038","gray-dark":"#d1d7e8","gray-hover":"#e4e4e8","gray-light":"#eeeef2"}}});
//# sourceMappingURL=serp.2dd21a0d.js.map