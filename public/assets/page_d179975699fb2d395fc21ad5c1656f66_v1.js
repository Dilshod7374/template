
; /* Start:"a:4:{s:4:"full";s:73:"/local/templates/youtravel/src/js/globals/UserProps.min.js?16863228271116";s:6:"source";s:54:"/local/templates/youtravel/src/js/globals/UserProps.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
function UserProps(){let e=this;this.setCookie=function(e,t,o={}){(o={path:"/",secure:!0,...o}).expires instanceof Date&&(o.expires=o.expires.toUTCString());let n=encodeURIComponent(e)+"="+encodeURIComponent(t);for(let e in o){n+="; "+e;let t=o[e];!0!==t&&(n+="="+t)}document.cookie=n},this.getCookie=function(e){let t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},this._getUtm=function(){let t=e.getCookie("utm")||"";return""!==t&&JSON.parse('{"'+t.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})},this.guid=(()=>{let e=()=>Math.floor(65536*(1+Math.random())).toString(16).substring(1);return e()+e()+e()+e()+e()+e()+e()+e()}),this.getUserId=function(){return e.getCookie("BITRIX_SM_USER_BX_ID")},this.getGuestId=function(){let t=e.getCookie("BX_USER_ID");if(!t){t=e.guid();let o=new Date(Date.now()+31536e6);e.setCookie("BX_USER_ID",t,{expires:o.toUTCString()})}return t}}youtravel=youtravel||{},void 0===youtravel.UserProps&&(youtravel.UserProps=new UserProps);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:81:"/local/templates/youtravel/src/js/tours/tour-recommendations.min.js?1686322827952";s:6:"source";s:63:"/local/templates/youtravel/src/js/tours/tour-recommendations.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
function TourRecommendations(e){let t=this;this.serialize=function(e,r){var s,n=[];for(s in e)if(e.hasOwnProperty(s)){var o=r?r+"["+s+"]":s,a=e[s];n.push(null!==a&&"object"==typeof a?t.serialize(a,o):encodeURIComponent(o)+"="+encodeURIComponent(a))}return n.join("&")},this._request=async function(e){return new Promise((r,s)=>{let n=new XMLHttpRequest;n.open("GET","/api/v2/serp/tours/top?"+t.serialize(e)),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.responseType="json",n.send(),n.onload=function(){let e=n.response;200!==n.status?s(e):200===n.status&&!0===e.error?s(e):r(e)}})},this.getTours=function(r={}){let s=youtravel.UserProps.getUserId(),n=youtravel.UserProps.getGuestId();r.user={},s?(r.user.id=s,r.user.type="user"):n&&(r.user.id=n,r.user.type="guest"),t._request(r).then(t=>{let r=t.data.tours.map(function(e,t){return{ItemId:e}});window.rpWidgetManager&&window.rpWidgetManager.updateData(e,r,t.data.metadata)})}}
/* End */
;; /* /local/templates/youtravel/src/js/globals/UserProps.min.js?16863228271116*/
; /* /local/templates/youtravel/src/js/tours/tour-recommendations.min.js?1686322827952*/
